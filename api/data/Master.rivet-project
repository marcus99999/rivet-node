version: 4
data:
  attachedData:
    trivet:
      testSuites: []
      version: 1
  graphs:
    -eizVpxv9JBIHuJFio6wd:
      metadata:
        description: Estimate the severity momentum
        id: -eizVpxv9JBIHuJFio6wd
        name: Severity - Momentum
      nodes:
        '[1e1q51RKaxyylTq6uz5Mi]:text "Text"':
          data:
            body: ""
            normalizeLineEndings: true
            text: https://crisis-comms-git-main-flipsidegroup.vercel.app/api/momentum-summary?id={{input}}
          outgoingConnections:
            - output->"Http Call" r3ShAtoIHSLs3s6ceW9hD/url
          visualData: 229.4430371931836/299.46635032763567/330/1086/var(--node-color-2)/var(--node-color-2)
        '[B5X_QFBAQQ49y3tr-rgwR]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: 1714.963911121372/401.7394231449638/330/1087/var(--node-color-3)/var(--node-color-3)
        '[Yq9CuDZYI_HAjkON-Ij_r]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Text" 1e1q51RKaxyylTq6uz5Mi/input
          visualData: -233.5548547124057/308.84770434173805/330/1086/var(--node-color-3)/var(--node-color-3)
        '[cImvTc5TMiqi-xzymw2Jv]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            maxTokens: 1024
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Graph Output" B5X_QFBAQQ49y3tr-rgwR/value
          visualData: 1193.8850330380174/186.96597022857463/230/1081//
        '[r3ShAtoIHSLs3s6ceW9hD]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: GET
            text: ""
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/conversations
            useUrlInput: true
          outgoingConnections:
            - res_body->"Chat" cImvTc5TMiqi-xzymw2Jv/prompt
          visualData: 708.8354723089329/316.32839265415123/280/1086/var(--node-color-4)/var(--node-color-4)
        '[rJTUQ98apWwR-V1wMFecW]:text "Text"':
          data:
            normalizeLineEndings: true
            text: >-
              You are a media analyst working within a PR crisis response team.


              Your role is to assess the momentum of a potential crisis, based on whether it is growing or shrinking in scale over time.


              Scale is represented by the volume of media conversation per day, measured in:
              	•	reach (audience exposed to the story), and
              	•	numberOfStories (number of distinct media items).

              You will be provided with an object like this:


              {
                "crisisId": "dky8i30kisowxhuupwo8iz5l",
                "crisisTitle": "Nestlé India Criticised for Prioritising Taste over Health in Kids' Food",
                "momentumByDay": [
                  { "date": "31/05/25", "numberOfStories": 1, "reach": 95000 },
                  { "date": "30/05/25", "numberOfStories": 1, "reach": 35000 },
                  ...
                  { "date": "01/06/25", "numberOfStories": 2, "reach": 1800000 }
                ]
              }


              The data is an array of days, each with:
              	•	the reach (number of people exposed that day), and
              	•	the number of stories that day.

              Your task:


              You must produce a momentum score between 1 and 10, where:
              	•	1 = the story is clearly receding and declining in visibility
              	•	10 = the story is accelerating rapidly and growing in visibility and volume
              	•	5 = flat or stable — no clear growth or decline
              	•	Any value between 1-10 represents degrees of momentum.

              How to reason:


              ✅ Look at the recent trend:
              	•	Is reach growing in the most recent few days?
              	•	Is the number of stories increasing?

              ✅ Consider the pattern over time:
              	•	Sudden surges → higher momentum
              	•	Flattening → stable
              	•	Declining → low momentum

              ✅ Prioritise the most recent 3-5 days, but take the whole series into account.


              ✅ A crisis that has high recent growth, even with past fluctuations, should skew to a higher score.


              ✅ A crisis that is clearly fading should be scored low.


              Output format:


              Produce a JSON object with this exact format:


              {
                "severity_momentum": {
                  "score": [A number from 1 to 10],
                  "rationale": "[A short sentence explaining why you gave that score, referencing the pattern of stories and reach.]"
                }
              }


              Example rationale styles:
              	•	“Story volume and reach are growing rapidly in the last few days — high momentum.”
              	•	“Reach has flattened after initial surge — stable momentum.”
              	•	“Both story volume and reach are clearly declining — low momentum.”
              	•	“Momentum is mixed, with inconsistent reach and volume — moderate score.”

              Additional notes:


              ❌ Do NOT simply average the values.

              ❌ You are modelling perceived momentum, as a human would interpret it from the chart.
          outgoingConnections:
            - output->"Chat" cImvTc5TMiqi-xzymw2Jv/systemPrompt
          visualData: 768.7212588974103/-184.1391797085875/330/1084/var(--node-color-2)/var(--node-color-2)
    3soSwiUKQ_X4fGdokyxAH:
      metadata:
        description: Individual press release rewrite
        id: 3soSwiUKQ_X4fGdokyxAH
        name: PR - Rewrite agent
      nodes:
        '[4IRH4YJ1BKdchejYhJkUO]:graphOutput "Graph Output"':
          data:
            dataType: object
            id: output
          visualData: 2227.6263947608086/749.6949871050882/330/973/var(--node-color-3)/var(--node-color-3)
        '[Xmbnoh9LlbLMA2d7kR3iV]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Code" tZ-TAvsyJmTjfBNokypbM/input1
          visualData: 32.40251112707543/745.9648103602689/330/975/var(--node-color-3)/var(--node-color-3)
        '[dHOn8TeIWKUpxenSiL3eX]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Graph Output" 4IRH4YJ1BKdchejYhJkUO/value
          visualData: 1732.7750600150482/729.5803546886575/280/972//
        '[m7fxbATaOCr54la6o-DRe]:text "Text"':
          data:
            text: |-
              {
                "text": "{{input}}"
              }
          outgoingConnections:
            - output->"HTTP - Rewrite endpoint" u07GLNaref9rHCyXG761B/req_body
          visualData: 786.7150049404587/654.6083486159396/330/962//
        '[tZ-TAvsyJmTjfBNokypbM]:code "Code"':
          data:
            code: >-
              // This is a code node, you can write and JS in here and it will
              be executed.

              // Inputs are accessible via an object `inputs` and data is typed (i.e. inputs.foo.type, inputs.foo.value)

              // Return an object with named outputs that match the output names specified in the node's config.

              // Output values must by typed as well (e.g. { bar: { type: 'string', value: 'bar' } }


              const inputText = inputs.input1.value;


              // Replace real line breaks (\n or \r\n) with the literal string "\n"

              const escapedText = inputText.replace(/\r?\n/g, '\\n');


              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" m7fxbATaOCr54la6o-DRe/input
          visualData: 456.14192062781547/422.97966171611455/230/974//
        '[u07GLNaref9rHCyXG761B]:httpCall "HTTP - Rewrite endpoint"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer xktxuiBbfwJ1t8X74yVzzlPhRvEkwcIHJY7Ly8lIKbcgRv359yShXd8rOTczQtZE"
              }
            method: POST
            url: https://pinecone-rewrite.vercel.app/api/rewrite
            useBodyInput: true
          outgoingConnections:
            - res_body->"Extract JSON" dHOn8TeIWKUpxenSiL3eX/input
          visualData: 1258.6831222377018/497.5937335663832/280/971/var(--node-color-4)/var(--node-color-4)
    8fhBx64QGpVrIT6XqLMrt:
      metadata:
        description: Apply best practices and create Q&A statements
        id: 8fhBx64QGpVrIT6XqLMrt
        name: PR- Best practice & Q&A
      nodes:
        '[-HvpH3_vlr-lQwwFbODFe]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/press-releases
            useBodyInput: true
            useHeadersInput: false
          outgoingConnections:
            - json->"Text" eejM-ua-wKdVtsje_wqZj/input
          visualData: 3227.8799951394085/-160.91326034928537/280/1020/var(--node-color-4)/var(--node-color-4)
        '[-M78XdDOh2qovXomWJf7_]:subGraph "SUB - Persona"':
          data:
            graphId: o8S-CeePSytOJAterI2wq
            useAsGraphPartialOutput: false
            useErrorOutput: false
          visualData: 5324.126069502101/-1178.9417822598523/330/1315/var(--node-color-1)/var(--node-color-1)
        '[-kgpH0TBjFvfM8H9c9N-8]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Http Call" HybVWMkqapLqooQgmPjod/req_body
          visualData: 2236.8265907068476/1485.2011964515843/280/700//
        '[0kMVxtP41NRcyej4vkbMO]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Extract JSON" 98fnq5MNPxGvhhtMfS2cT/input
          visualData: 3635.1410007475447/-684.8698816430267/330/1309//
        '[1GjN7fYCeUUGDt0rqodHa]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" ODJurltHNQDJ4V7wfThYc/object
          visualData: 4046.129294515346/-1109.1604432870472/280/1305//
        '[1Mc8h-DueAoO7z5XmdUn_]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Extract JSON" 1GjN7fYCeUUGDt0rqodHa/input
          visualData: 3663.0781160181446/-1110.1253077165113/330/1303//
        '[2-1stJD-1ZlJeod6DgIgb]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/press-releases
            useBodyInput: true
            useHeadersInput: false
          outgoingConnections:
            - json->"Text" 1Mc8h-DueAoO7z5XmdUn_/input
          visualData: 3217.6415951835093/-1632.4640370967563/280/1011/var(--node-color-4)/var(--node-color-4)
        '[4y5XJhHvehu2FhbfFSOcu]:getGlobal "Get Global"':
          data:
            dataType: string
            id: story
            onDemand: true
            useIdInput: false
            wait: false
          outgoingConnections:
            - value->"Text" Opbyfte5MRFNu5YsoFpzw/story
            - value->"Text" _xun_79EIycJcd_nUsd24/story
            - value->"Text" sXaO-y1UPPYzNLtmpQCZw/story
          visualData: 4147.336736073394/-1567.122188001525/230/1295//
        '[53VGWoy2POv4xS_sCHelY]:code "Escape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" givYg0K4zZa7xCEszaC2A/detail
            - output1->"Text" sXaO-y1UPPYzNLtmpQCZw/response
          visualData: 2157.4722107326074/-208.02240245710234/230/1287/var(--node-color-2)/var(--node-color-2)
        '[5Hx49_3tx7vg11u5zDxnB]:subGraph "Subgraph"':
          data:
            graphId: zYlQ2Xk75J--kr6X__Awr
            useAsGraphPartialOutput: false
            useErrorOutput: false
          description: Q&A agent
          outgoingConnections:
            - output->"Text" 5LkY8Mu_v0tqj2jV-I95I/input
          visualData: 1361.5910494615036/694.2543683328099/330/841/var(--node-color-1)/var(--node-color-1)
        '[5LkY8Mu_v0tqj2jV-I95I]:text "Text"':
          data:
            text: |-
              {
                "data": {
                  "crisis": "{{documentId}}",
                  {{input}},
                  "severity": "High"
                },
                "meta": {}
              }
          outgoingConnections:
            - output->"Extract JSON" wOjyfm5GpYlcB2L_GOh87/input
          visualData: 1825.8557784704903/662.20854467958/330/695//
        '[6Z0phS4vNCWYnQ0R2Ac7e]:subGraph "SUB - Persona"':
          data:
            graphId: o8S-CeePSytOJAterI2wq
            useAsGraphPartialOutput: false
            useErrorOutput: false
          visualData: 5329.113041336889/-409.993708398371/330/1318/var(--node-color-1)/var(--node-color-1)
        '[6j2SwrDcIwLifrtNqNdL_]:destructure "Destructure"':
          data:
            paths:
              - $.detail
              - $.history
          outgoingConnections:
            - match_0->"Text" sy6hucwRj-4x7Bc7byq6Q/input
            - match_1->"Stringify history" LN8DHo33vCFwL7CJ3ygnV/input1
          visualData: 1468.7149769838593/-1713.408244781903/280/999//
        '[8WRU16msc0m6A1wEL3qDe]:code "Escape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" Opbyfte5MRFNu5YsoFpzw/response
            - output1->"Text" d0PAVTcOCZeb0W8Lh-Cf7/detail
          visualData: 2175.9887199808218/-1950.7724093661475/230/1013/var(--node-color-2)/var(--node-color-2)
        '[98fnq5MNPxGvhhtMfS2cT]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" jtb7T-N-15zAQ1KWlv6GZ/object
          visualData: 4018.1921792447456/-683.9050172135627/280/1309//
        '[9uM1rtiITUgpEN3PYTfKu]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/press-releases
            useBodyInput: true
            useHeadersInput: false
          outgoingConnections:
            - json->"Text" 0kMVxtP41NRcyej4vkbMO/input
          visualData: 3241.763535110662/-967.9275520595879/280/1016/var(--node-color-4)/var(--node-color-4)
        '[BFvuIXOPmjhMuvzfJ5qmG]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Escape chars" yprS_XnqPy0aumVa4bQ3i/input1
          visualData: 1775.2256419791752/-812.8139888666074/330/1000//
        '[Et3sjdxYDIfmMn_vmhBMN]:subGraph "Subgraph"':
          data:
            graphId: zYlQ2Xk75J--kr6X__Awr
            useAsGraphPartialOutput: false
            useErrorOutput: false
          description: Q&A agent
          outgoingConnections:
            - output->"Text" c1Jqgt3-BvfFcKroOhntB/input
          visualData: 1349.3445983517227/1118.572431397192/330/640/var(--node-color-1)/var(--node-color-1)
        '[GywnVm1WCbBf0jZjzRtUx]:subGraph "Subgraph"':
          data:
            graphId: 3soSwiUKQ_X4fGdokyxAH
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Destructure" zS1BJ-fC48CLNOPqpbhn5/object
            - output->"Subgraph" h5k-44eeEQKUVT6CVVEBp/input
          visualData: 968.5188769682962/120.81770092334392/330/1008/var(--node-color-1)/var(--node-color-1)
        '[H3Fm81x8gTwGXYoLLSlLk]:text "Text"':
          data:
            text: |-
              {
                "data": {
                  "crisis": "{{documentId}}",
                  {{input}},
                  "severity": "Medium"
                },
                "meta": {}
              }
          outgoingConnections:
            - output->"Extract JSON" IqeXPetHyKTuaAAeoiCV8/input
          visualData: 1824.262105375531/992.889738466242/330/696//
        '[HybVWMkqapLqooQgmPjod]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/qa-pairs
            useBodyInput: true
            useHeadersInput: false
          visualData: 2952.2926914639334/1869.3584238414146/280/849/var(--node-color-4)/var(--node-color-4)
        '[I8Hh43o-NCmTGCH8qfDSg]:code "Escape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" givYg0K4zZa7xCEszaC2A/original
          visualData: 2473.59752133962/-299.30311690634096/230/1313/var(--node-color-2)/var(--node-color-2)
        '[IJqTXxPN2eOR5TSyVcxyg]:text "Text"':
          data:
            body: ""
            text: |-
              {
                "data": {
                  "original": "{{original}}",
                  "detail": "{{detail}}",
                  "history": {{history}},
                  "severity": "Medium",
                  "crisis": "{{documentId}}"
                }
              }
          outgoingConnections:
            - output->"Http Call" 9uM1rtiITUgpEN3PYTfKu/req_body
          visualData: 2783.855388025749/-962.0799156619528/330/1314//
        '[IqeXPetHyKTuaAAeoiCV8]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Http Call" g8AEP8e2wMiSjZRoBEebV/req_body
          visualData: 2240.013936896766/1154.5200026649222/280/699//
        '[KFPyBIeoLBVpJIpgIa7Ne]:graphInput "Graph Input"':
          data:
            dataType: object
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Destructure" WnXhs0d1-hpjlGoOM8hev/object
          visualData: -54.16591529002161/-37.33217977118733/330/705/var(--node-color-3)/var(--node-color-3)
        '[LN8DHo33vCFwL7CJ3ygnV]:code "Stringify history"':
          data:
            code: >-
              // This is a code node, you can write any JS here.

              // Inputs are accessible via an object `inputs`.

              // You want to stringify an array of objects (match_1.value).


              const rawArray = inputs.input1.value;  // This should be an array of objects already.


              const historyString = JSON.stringify(rawArray);


              return {
                output1: {
                  type: 'string',
                  value: historyString
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" d0PAVTcOCZeb0W8Lh-Cf7/history
          visualData: 2182.8016553956577/-1511.3648823370538/230/999/var(--node-color-2)/var(--node-color-2)
        '[ODJurltHNQDJ4V7wfThYc]:destructure "Destructure"':
          data:
            paths:
              - $.data.documentId
          outgoingConnections:
            - match_0->"Text" Opbyfte5MRFNu5YsoFpzw/document
          visualData: 4431.321364888481/-1088.1595362625771/280/1308//
        '[Opbyfte5MRFNu5YsoFpzw]:text "Text"':
          data:
            normalizeLineEndings: true
            text: |-
              {
                "data": [
                  {
                    "type": "press_release",
                    "story": "{{story}}",
                    "response": "{{response}}",
                    "document": "{{document}}"
                  }
                ]
              }
          outgoingConnections:
            - output->"SUB - Persona" -M78XdDOh2qovXomWJf7_/input
          visualData: 4878.772862378495/-1224.5763614075652/330/1307//
        '[P_YHgyPG4JayvP9KbwXcZ]:destructure "Destructure"':
          data:
            paths:
              - $.data.documentId
          outgoingConnections:
            - match_0->"Text" sXaO-y1UPPYzNLtmpQCZw/document
          visualData: 4448.793300537202/-223.94995130232084/280/1310//
        '[RuT_InG_fJifeLuf0p-ja]:code "Escape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" d0PAVTcOCZeb0W8Lh-Cf7/original
          visualData: 2486.396499455209/-1937.0170770507798/230/1014/var(--node-color-2)/var(--node-color-2)
        '[Tzw1BEigHvrxiJG6Imitg]:subGraph "Subgraph"':
          data:
            graphId: 3soSwiUKQ_X4fGdokyxAH
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Destructure" 6j2SwrDcIwLifrtNqNdL_/object
            - output->"Subgraph" 5Hx49_3tx7vg11u5zDxnB/input
          visualData: 975.3542984894425/-120.16410595381419/330/1010/var(--node-color-1)/var(--node-color-1)
        '[WOolU6oaL7Oiht_zsJrpo]:subGraph "Subgraph"':
          data:
            graphId: 3soSwiUKQ_X4fGdokyxAH
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Destructure" tZiBIUEeCz0SXW7GrqIVa/object
            - output->"Subgraph" Et3sjdxYDIfmMn_vmhBMN/input
          visualData: 963.6444629165164/405.9164609880693/330/804/var(--node-color-1)/var(--node-color-1)
        '[WnXhs0d1-hpjlGoOM8hev]:destructure "Destructure"':
          data:
            paths:
              - $.high
              - $.medium
              - $.low
              - $.documentId
          outgoingConnections:
            - match_0->"Escape chars" RuT_InG_fJifeLuf0p-ja/input1
            - match_0->"Subgraph" Tzw1BEigHvrxiJG6Imitg/input
            - match_1->"Escape chars" plGH_lirUh_MZiTXWER08/input1
            - match_1->"Subgraph" GywnVm1WCbBf0jZjzRtUx/input
            - match_2->"Escape chars" I8Hh43o-NCmTGCH8qfDSg/input1
            - match_2->"Subgraph" WOolU6oaL7Oiht_zsJrpo/input
            - match_3->"Text" 5LkY8Mu_v0tqj2jV-I95I/documentId
            - match_3->"Text" H3Fm81x8gTwGXYoLLSlLk/documentId
            - match_3->"Text" IJqTXxPN2eOR5TSyVcxyg/documentId
            - match_3->"Text" c1Jqgt3-BvfFcKroOhntB/documentId
            - match_3->"Text" d0PAVTcOCZeb0W8Lh-Cf7/documentId
            - match_3->"Text" givYg0K4zZa7xCEszaC2A/documentId
          visualData: 356.2879017266414/-22.51931906114679/280/593//
        '[_xun_79EIycJcd_nUsd24]:text "Text"':
          data:
            normalizeLineEndings: true
            text: |-
              {
                "data": [
                  {
                    "type": "press_release",
                    "story": "{{story}}",
                    "response": "{{response}}",
                    "document": "{{document}}"
                  }
                ]
              }
          outgoingConnections:
            - output->"SUB - Persona" xvZQq0mGPozaZImbV3X0y/input
          visualData: 4874.024106128468/-846.6673512324677/330/1307//
        '[aBKTE28_bqxqAkBVmwxdh]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" P_YHgyPG4JayvP9KbwXcZ/object
          visualData: 4101.4421059301685/-233.59859559696062/280/1310//
        '[c1Jqgt3-BvfFcKroOhntB]:text "Text"':
          data:
            text: |-
              {
                "data": {
                  "crisis": "{{documentId}}",
                  {{input}},
                  "severity": "Low"
                },
                "meta": {}
              }
          outgoingConnections:
            - output->"Extract JSON" -kgpH0TBjFvfM8H9c9N-8/input
          visualData: 1814.7000668057754/1315.6025667781075/330/697//
        '[d0PAVTcOCZeb0W8Lh-Cf7]:text "Text"':
          data:
            text: |-
              {
                "data": {
                  "original": "{{original}}",
                  "detail": "{{detail}}",
                  "history": {{history}},
                  "severity": "High",
                  "crisis": "{{documentId}}"
                }
              }
          outgoingConnections:
            - output->"Http Call" 2-1stJD-1ZlJeod6DgIgb/req_body
          visualData: 2781.73692241251/-1621.2360531180145/330/1012//
        '[eejM-ua-wKdVtsje_wqZj]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Extract JSON" aBKTE28_bqxqAkBVmwxdh/input
          visualData: 3718.3909274329676/-234.56346002642462/330/1310//
        '[g8AEP8e2wMiSjZRoBEebV]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/qa-pairs
            useBodyInput: true
            useHeadersInput: false
          visualData: 2955.932231911226/1410.6056998284348/280/848/var(--node-color-4)/var(--node-color-4)
        '[givYg0K4zZa7xCEszaC2A]:text "Text"':
          data:
            text: |-
              {
                "data": {
                  "original": "{{original}}",
                  "detail": "{{detail}}",
                  "history": {{history}},
                  "severity": "Low",
                  "crisis": "{{documentId}}"
                }
              }
          outgoingConnections:
            - output->"Http Call" -HvpH3_vlr-lQwwFbODFe/req_body
          visualData: 2817.4403974169873/-275.9568031832186/330/1312//
        '[h5k-44eeEQKUVT6CVVEBp]:subGraph "Subgraph"':
          data:
            graphId: zYlQ2Xk75J--kr6X__Awr
            useAsGraphPartialOutput: false
            useErrorOutput: false
          description: Q&A agent
          outgoingConnections:
            - output->"Text" H3Fm81x8gTwGXYoLLSlLk/input
          visualData: 1339.2994916524865/916.563410057345/330/639/var(--node-color-1)/var(--node-color-1)
        '[jtb7T-N-15zAQ1KWlv6GZ]:destructure "Destructure"':
          data:
            paths:
              - $.data.documentId
          outgoingConnections:
            - match_0->"Text" _xun_79EIycJcd_nUsd24/document
          visualData: 4401.397040497633/-570.5368372648497/280/1319//
        '[khiwBEZ1TBidGeoldXUHD]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/qa-pairs
            useBodyInput: true
            useHeadersInput: false
          visualData: 2953.4384105711506/917.8690320322308/280/847/var(--node-color-4)/var(--node-color-4)
        '[plGH_lirUh_MZiTXWER08]:code "Escape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" IJqTXxPN2eOR5TSyVcxyg/original
          visualData: 2461.856207528469/-1207.0793160880717/230/1285/var(--node-color-2)/var(--node-color-2)
        '[sXaO-y1UPPYzNLtmpQCZw]:text "Text"':
          data:
            normalizeLineEndings: true
            text: |-
              {
                "data": [
                  {
                    "type": "press_release",
                    "story": "{{story}}",
                    "response": "{{response}}",
                    "document": "{{document}}"
                  }
                ]
              }
          outgoingConnections:
            - output->"SUB - Persona" 6Z0phS4vNCWYnQ0R2Ac7e/input
          visualData: 4878.107295264919/-440.58113311008424/330/1317//
        '[sy6hucwRj-4x7Bc7byq6Q]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Escape chars" 8WRU16msc0m6A1wEL3qDe/input1
          visualData: 1780.559776762585/-1714.9595776297851/330/999//
        '[tZiBIUEeCz0SXW7GrqIVa]:destructure "Destructure"':
          data:
            paths:
              - $.detail
              - $.history
          outgoingConnections:
            - match_0->"Text" zhfkXkn33LhKLQQgwWFkb/input
            - match_1->"Stringify history" xeFmdBAsiVhzX2DvcnF6l/input1
          visualData: 1430.7136869796282/280.9090053297521/280/1282//
        '[tv62jd9FoE96MDsSQyiow]:code "Stringify history"':
          data:
            code: >-
              // This is a code node, you can write any JS here.

              // Inputs are accessible via an object `inputs`.

              // You want to stringify an array of objects (match_1.value).


              const rawArray = inputs.input1.value;  // This should be an array of objects already.


              const historyString = JSON.stringify(rawArray);


              return {
                output1: {
                  type: 'string',
                  value: historyString
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" IJqTXxPN2eOR5TSyVcxyg/history
          visualData: 2177.4675206122474/-634.1625215380815/230/1000/var(--node-color-2)/var(--node-color-2)
        '[wOjyfm5GpYlcB2L_GOh87]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Http Call" khiwBEZ1TBidGeoldXUHD/req_body
          visualData: 2247.9823023715626/862.086963157283/280/698//
        '[xeFmdBAsiVhzX2DvcnF6l]:code "Stringify history"':
          data:
            code: >-
              // This is a code node, you can write any JS here.

              // Inputs are accessible via an object `inputs`.

              // You want to stringify an array of objects (match_1.value).


              const rawArray = inputs.input1.value;  // This should be an array of objects already.


              const historyString = JSON.stringify(rawArray);


              return {
                output1: {
                  type: 'string',
                  value: historyString
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" givYg0K4zZa7xCEszaC2A/history
          visualData: 2171.1894668266773/241.46585480912967/230/1003/var(--node-color-2)/var(--node-color-2)
        '[xvZQq0mGPozaZImbV3X0y]:subGraph "SUB - Persona"':
          data:
            graphId: o8S-CeePSytOJAterI2wq
            useAsGraphPartialOutput: false
            useErrorOutput: false
          visualData: 5325.304244063791/-905.7371525088987/330/1307/var(--node-color-1)/var(--node-color-1)
        '[yprS_XnqPy0aumVa4bQ3i]:code "Escape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" IJqTXxPN2eOR5TSyVcxyg/detail
            - output1->"Text" _xun_79EIycJcd_nUsd24/response
          visualData: 2180.967414058909/-1072.3118980744975/230/1283/var(--node-color-2)/var(--node-color-2)
        '[yzHcLZiBRrO5Ud4x9lPlA]:comment "Comment"':
          data:
            backgroundColor: rgba(0,108,255,0.05)
            color: rgba(255,255,255,1)
            height: 1145.0707247038717
            text: Used to be PR - Rewrite supervisor agent - now just one Rewrite
          visualData: 762.5977644414509/-501.011773647319/732.9730588231496/923//
        '[zS1BJ-fC48CLNOPqpbhn5]:destructure "Destructure"':
          data:
            paths:
              - $.detail
              - $.history
          outgoingConnections:
            - match_0->"Text" BFvuIXOPmjhMuvzfJ5qmG/input
            - match_1->"Stringify history" tv62jd9FoE96MDsSQyiow/input1
          visualData: 1421.8087955934404/-812.9255378830055/280/1001//
        '[zhfkXkn33LhKLQQgwWFkb]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Escape chars" 53VGWoy2POv4xS_sCHelY/input1
          visualData: 1751.460762638661/37.157313664175376/330/1006//
    EfrNMYIRnDPH9b2qi_inj:
      metadata:
        description: ""
        id: EfrNMYIRnDPH9b2qi_inj
        name: Severity - Scale
      nodes:
        '[P3SYMfFBNNYuWbXxdSp8d]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: 1875.5338243402894/103.66301122119557/330/1084/var(--node-color-3)/var(--node-color-3)
        '[QB5egqbszyjG1nUgB5paM]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: GET
            text: ""
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/conversations
            useUrlInput: true
          outgoingConnections:
            - json->"Chat" SKYkoImNVIomPCw2QpDoA/prompt
            - json->"Destructure" e1nMc32NAjbiaSQ1DTP_y/object
          visualData: 156.40648292293952/-159.99827488955293/280/1063/var(--node-color-4)/var(--node-color-4)
        '[SKYkoImNVIomPCw2QpDoA]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 1024
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Text" TML2qP4sSbstAq1bXRm1y/input
          visualData: 986.5394461457543/-203.99314896184194/230/1070//
        '[TML2qP4sSbstAq1bXRm1y]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Graph Output" P3SYMfFBNNYuWbXxdSp8d/value
          visualData: 1379.9068275470765/98.04230236194954/330/1071//
        '[YyeI0M3H0xamPKBRaf9p-]:text "Text"':
          data:
            normalizeLineEndings: true
            text: |-
              {
                "severity_scale": {
                  "score": 3
              }
          visualData: 1219.3206990355168/460.1732022182536/219.4420707054851/1066/var(--node-color-2)/var(--node-color-2)
        '[bgzAE5faFdMAcBxE1TEfN]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Text" na8CDrlRN_EKe9VlVLzqK/input
          visualData: -785.9838440983992/-167.4789632019661/330/1083/var(--node-color-3)/var(--node-color-3)
        '[e1nMc32NAjbiaSQ1DTP_y]:destructure "Destructure"':
          data:
            paths:
              - $.data[0].Topics.stories
          visualData: 640.6045345686065/242.9473639799578/280/1046//
        '[lztre-AS2RFVS6QlVfs1K]:text "Text"':
          data:
            normalizeLineEndings: true
            text: >-
              You are a media analyst working within a PR crisis response team.
              Your role is to assess the *scale* of a potential crisis based on
              how widely it has been seen by the public.


              You will be provided with a small JSON object gicing you a **reach number**, representing how many people saw or engaged with the story.


              The JSON object looks roughly like this:


              {
                "crisisId": "dky8i30kisowxhuupwo8iz5l",
                "crisisTitle": "Nestlé India Criticised for Prioritising Taste over Health in Kids’ Food",
                "totalReach": 8935000,
                "socialReach": 7690000,
                "newsReach": 1245000
              }


              ### Instructions:


              Based on the total number of views in the "totalReach" field, use the following scale to rate the overall **scale of coverage** from 1 to 10:


              - 1-2: Fewer than 10,000 total views (very low visibility)

              - 3-4: 10,000 to 100,000 total views (moderate visibility)

              - 5-6: 100,001 to 500,000 total views (regional or niche-wide reach)

              - 7-8: 500,001 to 2,000,000 total views (national or high-profile online visibility)

              - 9: 2,000,001 to 5,000,000 views (very high visibility)

              - 10: More than 5,000,000 views (widespread national or international coverage)


              2. Create a short piece of copy for the rationale that details the socialReach, the newReach and the totalReach, with an explanatiin for the overall numeric score rating.


              3. Return the following JSON object:


              {
                "severity_scale": {
                  "score": [RATING],
                  "rationale": [The rationale copy]
              }
          outgoingConnections:
            - output->"Chat" SKYkoImNVIomPCw2QpDoA/systemPrompt
          visualData: 495.4667382592778/-611.2041237801709/330/1085/var(--node-color-2)/var(--node-color-2)
        '[na8CDrlRN_EKe9VlVLzqK]:text "Text"':
          data:
            body: ""
            normalizeLineEndings: true
            text: https://crisis-comms-git-main-flipsidegroup.vercel.app/api/reach-summary?id={{input}}
          outgoingConnections:
            - output->"Http Call" QB5egqbszyjG1nUgB5paM/url
          visualData: -322.98595219280986/-176.8603172160685/330/1082/var(--node-color-2)/var(--node-color-2)
    GHgi_Qdv5HEfN9Cwup8cY:
      metadata:
        description: Estimate crisis severity
        id: GHgi_Qdv5HEfN9Cwup8cY
        name: Severity - Master
      nodes:
        '[-z50Fnu2D56A10PrKG8bh]:subGraph "Subgraph"':
          data:
            graphId: EfrNMYIRnDPH9b2qi_inj
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Assemble Prompt" 7TeQ6pCv2o5V2YXCcjDgF/message1
          visualData: 952.1505568885873/-238.14683473159477/330/80/var(--node-color-1)/var(--node-color-1)
        '[0YdCXU2DMBAdqkm0XvqRm]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "A boiler explosion or equipment failure in Nestlé India’s Samalkha plant
              injures several workers, with local media reporting live from the
              scene. Labour unions allege the incident was preventable, citing
              ignored complaints about faulty equipment and poor ventilation. A
              video of the aftermath filmed by a worker goes viral on social
              media.  Trigger Points: Safety audit records showing irregular
              checks Previous minor incidents or warning signs that were not
              addressed Testimonies from whistleblowers or ex-employees Media
              interest in corporate accountability and labour
              rights  Media/Social Sentiment: Trending hashtags:
              #NestleIndiaAccident #FactoryNegligence Coverage in business and
              mainstream media around ethical labour practices"
          visualData: -312.6010907316489/442.3021227302281/330/1094/var(--node-color-2)/var(--node-color-2)
        '[7TeQ6pCv2o5V2YXCcjDgF]:assemblePrompt "Assemble Prompt"':
          outgoingConnections:
            - prompt->"Chat" _s43ZTL5W4a5ldiyC7j3k/prompt
          visualData: 1520.034267464906/146.81349945678429/280/101//
        '[7ouISIuZoDgTyf0yhM7sj]:destructure "Destructure"':
          data:
            paths:
              - $.data.title
              - $.data.date
              - $.data.description
            text: ""
          outgoingConnections:
            - match_2->"Subgraph" tSneJ2F42M20RGsm8W9u_/input
            - match_2->"Subgraph" ykrdQorXBm6sTD0CYykhr/input
          visualData: 200.42723207197824/260.98481720614393/280/126//
        '[9LbLUH9DXSm4aUH_vBpcw]:subGraph "Subgraph"':
          data:
            graphId: -eizVpxv9JBIHuJFio6wd
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Assemble Prompt" 7TeQ6pCv2o5V2YXCcjDgF/message4
          visualData: 954.9104811826115/162.70519030652952/330/1101/var(--node-color-1)/var(--node-color-1)
        '[KfOHARDNuJGbsL7wsQRjB]:graphOutput "Graph Output"':
          data:
            dataType: object
            id: severity
          visualData: 2921.7347660534633/309.1086678418129/330/137/var(--node-color-3)/var(--node-color-3)
        '[NTU1OKMCMtEuf30vFKNh4]:text "Text"':
          data:
            normalizeLineEndings: true
            text: dky8i30kisowxhuupwo8iz5l
          visualData: 156.60194087099478/-105.10663689610769/330/1103//
        '[_FwqVLMhnvJzzdKNQ6sPG]:graphInput "Graph Input"':
          data:
            dataType: object
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Destructure" 7ouISIuZoDgTyf0yhM7sj/object
          visualData: -404.2982173488524/153.73042136537202/330/1093/var(--node-color-3)/var(--node-color-3)
        '[_s43ZTL5W4a5ldiyC7j3k]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 1024
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Extract JSON" vzD1SMeR-en172gQVjSp2/input
            - response->"Text" q4J6Cr_USUSIiqH2rVE7p/input
          visualData: 2030.3673332067467/298.02329671362577/230/109//
        '[k6jy8_Nk5sKxENwH9aZ6N]:subGraph "Subgraph"':
          data:
            graphId: _7ny001Rtlr9P7w3EfY8D
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Assemble Prompt" 7TeQ6pCv2o5V2YXCcjDgF/message3
          visualData: 953.7050009619236/-22.318816612781937/330/1098/var(--node-color-1)/var(--node-color-1)
        '[kvM70I68-pUwFzV4NG5ZU]:text "Text"':
          data:
            normalizeLineEndings: true
            text: >-
              You are a data processor reviewing a corporate crisis impact
              assessment represented as a JSON object.


              The object includes the following 5 severity dimensions:

              	•	severity_scale - a JSON object with a single numeric items for score and a rationale field
              	•	severity_emotionalintensity - individual scores for customers, employees, investors
              	•	severity_influence - a single numeric score
              	•	severity_momentum - a single numeric score
              	•	severity_boycottrisk - individual scores for customers, employees, investors

              Your task:


              1.	Calculate an average score for each of the three stakeholder groups:
              	•	Customers
              	•	Employees
              	•	Investors

              2.	For each group, average the following five values:
              	•	severity_scale.[group].score
              	•	severity_influence.score
              	•	severity_momentum.score
              	•	severity_emotionalintensity.[group].score
              	•	severity_boycottrisk.[group].score

              3.	Apply the following weightings to each of the five metrics:


              {
                "severity_scale": 1,
                "severity_emotionalintensity": 1,
                "severity_influence": 1,
                "severity_momentum": 1,
                "severity_boycottrisk": 1
              }


              4.	Normalize the result and return a rounded average score between 1 and 10 for each stakeholder group. Round the number up or down to the nearest integer.


              5.	Calculate a fourth value, overall_average_score, as the mean of the three stakeholder averages.


              6.	Based on the overall score, assign a summary severity level using this scale:
              	•	If overall_average_score < 4: "Low"
              	•	If 4 ≤ score < 7: "Medium"
              	•	If score ≥ 7: "High"

              ✅ Output Format:


              Return a JSON object with two top-level keys:
              	1.	"severity" - the final summary string: "High", "Medium", or "Low"
              	2.	"severity_logic" - an object containing:
              	•	the original input JSON
              	•	the added average_score_customers, average_score_employees, and average_score_investors

              The final structure must look like this:


              {
              	"data": {
              		"severity": "High",
              		"severity_logic": {
              			...original data and new average fields...
              		}
              	}
              }


              Do not include any explanations, calculations, markdown formatting, or stray characters. Return only the final valid UTF-8 JSON object.
          outgoingConnections:
            - output->"Chat" _s43ZTL5W4a5ldiyC7j3k/systemPrompt
          visualData: 1599.354387385004/-363.6519187972585/330/1104/var(--node-color-2)/var(--node-color-2)
        '[q4J6Cr_USUSIiqH2rVE7p]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          visualData: 2432.447930457893/218.98181178391317/330/107//
        '[tSneJ2F42M20RGsm8W9u_]:subGraph "Subgraph"':
          data:
            graphId: TIrXJT0lI1gQdU0jtzkhz
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Assemble Prompt" 7TeQ6pCv2o5V2YXCcjDgF/message2
          visualData: 955.4057306610589/395.5980908963679/330/1100/var(--node-color-1)/var(--node-color-1)
        '[vzD1SMeR-en172gQVjSp2]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Graph Output" KfOHARDNuJGbsL7wsQRjB/value
          visualData: 2476.083253749114/562.6404419130982/280/130//
        '[wlXIDF_D3ab_FCSneCx_n]:getGlobal "Get Global"':
          data:
            dataType: string
            id: documentId
            onDemand: true
            useIdInput: false
            wait: false
          outgoingConnections:
            - value->"Subgraph" -z50Fnu2D56A10PrKG8bh/input
            - value->"Subgraph" 9LbLUH9DXSm4aUH_vBpcw/input
            - value->"Subgraph" k6jy8_Nk5sKxENwH9aZ6N/input
          visualData: 348.2199617299237/-382.1792060575412/230/1095//
        '[ykrdQorXBm6sTD0CYykhr]:subGraph "Subgraph"':
          data:
            graphId: jOpSxxKf2JqdCjND_3e_G
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Assemble Prompt" 7TeQ6pCv2o5V2YXCcjDgF/message5
          visualData: 958.0479475145355/595.53577318013/330/136/var(--node-color-1)/var(--node-color-1)
    KpT800xhGZdwy4QxONPKN:
      metadata:
        description: ""
        id: KpT800xhGZdwy4QxONPKN
        name: Scenarios - Create
      nodes:
        '[LvY-_lVMY_t8lNzypgQPH]:getGlobal "Get Global"':
          data:
            dataType: string
            id: role
            onDemand: true
            useIdInput: false
            wait: false
          outgoingConnections:
            - value->"Text" czMnCg4tMq2UNYX-apRAi/role
          visualData: 174.1841578432909/182.2574549266893/230/908//
        '[cZ0ftay5oLWMqkrWqtnXp]:graphOutput "Graph Output"':
          data:
            dataType: object
            id: output
          visualData: 1758/528/330/897/var(--node-color-3)/var(--node-color-3)
        '[czMnCg4tMq2UNYX-apRAi]:text "Text"':
          data:
            text: >-
              Your role is {{role}}


              ACTION FOR THIS TASK


              You will be given a JSON object with a number of data points including "title",  "date" and "description". 


              It is your job to predict possible risk scenarios based on the crisis defined in the prompt and to give details of potential outcomes for each case.


              Each time you are given a prompt you should generate a total of 3 short scenarios to demonstrate a possible outcome of the crisis described in the prompt.


              You should write 3 possible outcomes: A high risk scenario, a medium risk scenario and a low risk scenario.


              In each case be sure to reference the issue, the location and the date it occured.


              Each of the 3 scenarios should begin with a description of approximately two paragraphs of prose that clearly outlines the potential situation.


              After this description, insert two escaped line breaks (\n\n) followed by 3-4 concise bullet points that explicitly outline potential outcomes.


              ⚠️ For all line breaks or paragraph breaks (including within paragraphs or bullet spacing), use escaped newline characters (\n) — not actual carriage returns or line breaks in the text.


              Avoid any trailing new line characters at the end of scenario descriptions.


              You should also generate a short summary title descriptor for each scenario of fewer than 10 words that describes the scenario outcome at a high level.


              Output the content as a JSON object ONLY in the following format:


              {
                  "high-title": "High risk summary title",
                  "high": "High risk scenario body content",
                  "medium-title": "Medium risk summary tile",
                  "medium": "Medium risk scenario body content",
                  "low-title": "Low risk summary title",
                  "low": "Low risk scenario body content"
              }
          description: Scenario generation system prompt
          outgoingConnections:
            - output->"Chat" f4QfJvKebW1dU6H8AJ13r/systemPrompt
          visualData: 521.0936351133283/225.79663544028764/330/904//
        '[f4QfJvKebW1dU6H8AJ13r]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 1024
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          description: High risk scenario
          outgoingConnections:
            - response->"Extract JSON" xFOuKLadBzj0d_RNnrzN5/input
          visualData: 943/558/230/901//
        '[nrW4PhSpsORIwFKPjOwSu]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Chat" f4QfJvKebW1dU6H8AJ13r/prompt
          visualData: 201/812/330/899/var(--node-color-3)/var(--node-color-3)
        '[xFOuKLadBzj0d_RNnrzN5]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Graph Output" cZ0ftay5oLWMqkrWqtnXp/value
          visualData: 1358.421582439276/731.3571609080569/280/907//
    TIrXJT0lI1gQdU0jtzkhz:
      metadata:
        description: ""
        id: TIrXJT0lI1gQdU0jtzkhz
        name: Severity - Emotional intensity
      nodes:
        '[4-CXAo2JBQr55vA1pyFpi]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 1024
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Graph Output" eB-AF2eWf52GBDbMiX6Se/value
          visualData: 827.9186717527157/607.7098605602876/230/20//
        '[6ZaWwKsiGgdVdXRtKJb3C]:getGlobal "Get Global"':
          data:
            dataType: string
            id: role
            onDemand: true
            useIdInput: false
            wait: false
          outgoingConnections:
            - value->"Text" LnDAS8NRLrMyQQ50ndXED/role
          visualData: -1382.0226986418043/485.63407977788967/230/22//
        '[LnDAS8NRLrMyQQ50ndXED]:text "Text"':
          data:
            normalizeLineEndings: true
            text: >
              Your role is {{role}}


              ACTION FOR THIS TASK

              You will be given some text describing a corporate crisis scenario that presents a risk to the company.


              Your task is to estimate the emotional intensity of the scenario for each key stakeholder group:
              	•	Customers
              	•	Employees
              	•	Investors

              You must return a score from 1 to 10, where 10 is the most emotionally severe for that group. Consider how upsetting, distressing, or trust-breaking the situation is for each group based on the text.


              Use the following emotional severity scale as a guideline:


              1. Very Low - Minor annoyance or negligible impact.

              2. Low - Slight concern or frustration, isolated.

              3. Moderate - Awareness of issue, mild reputational unease.

              4. Noticeable - Frustration or criticism becomes visible.

              5. Concerning - Trust begins to erode or ethical issues arise.

              6. Serious - Stakeholders feel misled or personally affected.

              7. Alarming - Escalating concern, calls for accountability.

              8. Critical - Direct harm or significant loss of trust.

              9. Severe - Long-term damage to confidence or wellbeing.

              10. Extreme - Crisis of trust or identity; potential for severed relationships or existential risk.


              For each item add some short text to describe the rationale for why you gave the rating. Use language that makes it clear that the rationale is predictive rather than describing actual outcomes so the reader does not misunderstand the rationale as being actual events.


              Output as a JSON object ONLY in this format:


              {
                "severity_emotionalintensity": {
                  "customers": {
                    "score": 8,
                    "rationale": "Customers have been directly harmed by the faulty product, with widespread media coverage and safety concerns leading to fear and outrage."
                  },
                  "employees": {
                    "score": 5,
                    "rationale": "Employees are concerned about the company's image and potential layoffs but are not directly affected by the incident."
                  },
                  "investors": {
                    "score": 7,
                    "rationale": "Investors fear reputational fallout and regulatory penalties that could affect long-term value, but the business remains operational."
                  }
                }
              }
          outgoingConnections:
            - output->"Chat" 4-CXAo2JBQr55vA1pyFpi/systemPrompt
          visualData: -994.0089025133748/285.12531371706797/1483.8939389042782/16/var(--node-color-2)/var(--node-color-2)
        '[Zuwhu-2EIC9x2facEXJBs]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Chat" 4-CXAo2JBQr55vA1pyFpi/prompt
          visualData: 208.94726938496646/908.239665609297/330/19/var(--node-color-3)/var(--node-color-3)
        '[eB-AF2eWf52GBDbMiX6Se]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: 1233.6011102299763/570.2513877874702/330/8/var(--node-color-3)/var(--node-color-3)
    WoecD9--01VjQHhXTmwtU:
      metadata:
        description: Interative press release rewriter
        id: WoecD9--01VjQHhXTmwtU
        name: "* PR - Rewrite supervisor agent (REMOVED)"
      nodes:
        '[6JMB-7JMK_o3mDn4Nyw66]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: 1813.6176691846756/636.1963994533993/330/866/var(--node-color-3)/var(--node-color-3)
        '[ZqDtSofTEoqAtIupdx6LE]:loopController "Loop Controller"':
          data:
            atMaxIterationsAction: break
            maxIterations: 2
          outgoingConnections:
            - break->"Text" lMF6X1DupFsFWvPRvsKDS/input
            - output1->"Subgraph" pUmp7YYzE2Qb2_bjZOcA4/input
          visualData: 448.2173767164668/1057.9399416194742/280/883//
        '[lMF6X1DupFsFWvPRvsKDS]:text "Text"':
          data:
            text: "{{input}}"
          outgoingConnections:
            - output->"Graph Output" 6JMB-7JMK_o3mDn4Nyw66/value
          visualData: 771.1588915227672/693.2274241079336/330/877//
        '[nQoPwHb3U2PvvKnnx-8Yc]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Loop Controller" ZqDtSofTEoqAtIupdx6LE/input1Default
          visualData: -294.9300031933259/895.6365623658544/330/872/var(--node-color-3)/var(--node-color-3)
        '[pUmp7YYzE2Qb2_bjZOcA4]:subGraph "Subgraph"':
          data:
            graphId: 3soSwiUKQ_X4fGdokyxAH
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Loop Controller" ZqDtSofTEoqAtIupdx6LE/input1
            - output->"Subgraph" tGjoPWvOpRqQlUEhNXlhw/input
          visualData: 831.7143079689475/1545.1666506587633/330/884/var(--node-color-1)/var(--node-color-1)
        '[tGjoPWvOpRqQlUEhNXlhw]:subGraph "Subgraph"':
          data:
            graphId: hcy2UDhZVh6QP8e0AjKC7
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - Analysis->"Loop Controller" ZqDtSofTEoqAtIupdx6LE/continue
          visualData: 1240.295371560674/1301.6917878280167/330/885/var(--node-color-1)/var(--node-color-1)
    _7ny001Rtlr9P7w3EfY8D:
      metadata:
        description: Estimate the severity of influence
        id: _7ny001Rtlr9P7w3EfY8D
        name: Severity - Influence
      nodes:
        '[-3u4TY3RxoDwOwv2PoGAe]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: GET
            text: ""
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/conversations
            useUrlInput: true
          outgoingConnections:
            - res_body->"Chat" nj_dt62HVgvrZ5wpCrhZA/prompt
          visualData: 728.5227232646456/685.1154374371388/280/1092/var(--node-color-4)/var(--node-color-4)
        '[6bZjrNwERO89tYahpSzuN]:text "Text"':
          data:
            body: ""
            normalizeLineEndings: true
            text: https://crisis-comms-git-main-flipsidegroup.vercel.app/api/influence-summary?id={{input}}
          outgoingConnections:
            - output->"Http Call" -3u4TY3RxoDwOwv2PoGAe/url
          visualData: 249.13028814889606/668.2533951106232/330/1092/var(--node-color-2)/var(--node-color-2)
        '[CoJckDxjix8NO-JvBpGPl]:text "Text"':
          data:
            normalizeLineEndings: true
            text: >-
              You are a media analyst working within a PR crisis response team.


              ACTION FOR THIS TASK

              Your role is to assess the influence exposure of a story — meaning how influential are the media and social outlets discussing the story.


              You will receive an object that looks like this:


              {
                "crisisId": "dky8i30kisowxhuupwo8iz5l",
                "crisisTitle": "Nestlé India Criticised for Prioritising Taste over Health in Kids’ Food",
                "influenceScores": [2,1,10,10,10,5,10,10,10,10,3,10,9,10,10,10,10,10,10,10,2,1,10,10,10,5,10,10,10,10,3,10,9,10,7,10,10,4,10,1]
              }


              Each number in the influenceScores array represents a story, and the number represents the influence of that story’s source — on a scale from 1 (low influence) to 10 (very high influence).


              Scoring logic:


              You must produce a single severity_influence score between 1 and 10, that represents the overall influence exposure of the story.


              It is NOT a simple average. Your scoring should be weighted toward prominence of high influence stories:


              ✅ If there is a significant number of 9s or 10s, the overall score should skew high — even if some lower scores exist.


              ✅ If there is a broad mix of medium and low scores (1-5), the score should be lower.


              ✅ If almost all scores are low (1-5), the overall score should reflect low influence exposure.


              ✅ If the story has mostly 10s with just a few lower outliers, the overall score should still be very high.


              Output format:


              Produce a JSON object with this exact format:


              {
                "severity_influence": {
                  "score": [A number from 1 to 10],
                  "rationale": "[A short sentence explaining why you gave that score, referencing the overall pattern of influence scores.]"
                }
              }


              Examples of rationale phrasing:
              	•	“The majority of stories were published on very high influence platforms (9s and 10s), indicating broad and strong exposure.”
              	•	“There is a mix of high and low influence stories, but the large cluster of 10s skews the overall exposure upward.”
              	•	“Influence is mixed and weighted toward medium-tier platforms, leading to a moderate exposure score.”
              	•	“Most stories are on low-influence platforms, with only a few high-profile mentions.”
          outgoingConnections:
            - output->"Chat" nj_dt62HVgvrZ5wpCrhZA/systemPrompt
          visualData: 857.4828987343444/255.03966694086816/330/1088/var(--node-color-2)/var(--node-color-2)
        '[cQHPUJqbPtRObhSzVS_Ig]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: 1779.6841057456163/744.0308187896541/330/1093/var(--node-color-3)/var(--node-color-3)
        '[nj_dt62HVgvrZ5wpCrhZA]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 1024
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Graph Output" cQHPUJqbPtRObhSzVS_Ig/value
          visualData: 1344.3238002870742/621.6729384805782/230/1090//
        '[zNA61vZ_dE5lnqBcUhUp6]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Text" 6bZjrNwERO89tYahpSzuN/input
          visualData: -213.86760375669326/677.6347491247257/330/1092/var(--node-color-3)/var(--node-color-3)
    aPC7m9RtS6-gmBn2nKrYk:
      metadata:
        description: ""
        id: aPC7m9RtS6-gmBn2nKrYk
        name: "* Old test"
      nodes:
        '[-nA7x4qH9EaFXKxjUZQas]:text "Text"':
          data:
            body: ""
            text: >-
              {

              "data": {
                "crisis": "{{documentId}}",
                "detail": "FOR IMMEDIATE RELEASE\n\nMay 13, 2025\n\nNestlé Responds Proactively to 'Test Crisis' Concerns\n\nNestlé acknowledges the emerging 'Test Crisis' situation concerning some of our products. We wish to assure our valued consumers and stakeholders that we are vigilantly monitoring the situation, with a steadfast commitment to transparency and consumer safety.\n\nDespite the minimal media coverage and limited consumer awareness at this stage, we understand the significance of proactively addressing any potential concerns. Our dedicated team is conducting an exhaustive investigation to uphold the integrity of our products and ensure the safety of our customers.\n\nWe are confident in our ability to navigate this situation effectively and preserve the trust of our consumers. As our investigation progresses, we will provide regular updates to keep all stakeholders informed.\n\nWe appreciate your ongoing support and trust in Nestlé.\n\nBarnaby Fry\n\nPR Spokesperson, Nestlé\n\nbarnaby.fry@nestle.com\n\n7956949123",
                "severity": "High",
                "history": {
                "adjustments": [
                  "Changed 'addresses' to 'responds proactively' for a more active tone",
                  "Replaced 'referred to as' with 'concerning' for clarity",
                  "Replaced 'we want to reassure' with 'we wish to assure' for a more professional tone",
                  "Replaced 'we believe in the importance of' with 'we understand the significance of' for a more assertive tone",
                  "Replaced 'we are confident in our ability to manage' with 'we are confident in our ability to navigate' for a more dynamic tone",
                  "Added 'regular' before 'updates' for clarity"
                ],
                "sourceExamples": [
                  "Nestlé Addresses Limited Product Concerns with Commitment to Transparency"
                ]
                }
                }
              }
          outgoingConnections:
            - output->"Http Call" jj_C4zqrggSlvOkT9GiNm/req_body
          visualData: 618.3068822634/1303.7969476182816/330/963//
        '[GDLfFenNZnA2NfKb3uaL1]:text "Text"':
          data:
            text: "{{input}}"
          visualData: 1642.2279087611696/1307.844066300091/330/960//
        '[InKZuv1NtHKkVdTljUnyr]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Subgraph" hhiYeQdZXmWK63JrpROSD/input
          visualData: 1022.1003749492432/964.0200601708399/280/956//
        '[T_zXdH8bRsG3kswJKoBvk]:getGlobal "Get Global"':
          data:
            dataType: string
            id: documentId
            onDemand: true
            useIdInput: false
            wait: false
          outgoingConnections:
            - value->"Text" -nA7x4qH9EaFXKxjUZQas/documentId
          visualData: 257/1516.727042733621/230/null//
        '[g4lusC14OrD6KykFlh9yz]:text "Text"':
          data:
            text: "{{input}}"
          visualData: 1878.3098318667162/951.6976223008668/330/958//
        '[hhiYeQdZXmWK63JrpROSD]:subGraph "Subgraph"':
          data:
            graphId: hcy2UDhZVh6QP8e0AjKC7
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - Analysis->"Text" g4lusC14OrD6KykFlh9yz/input
          visualData: 1418.2873417010514/963.8389783462949/330/957/var(--node-color-1)/var(--node-color-1)
        '[jj_C4zqrggSlvOkT9GiNm]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/press-releases
            useBodyInput: true
            useHeadersInput: false
          outgoingConnections:
            - res_body->"Text" GDLfFenNZnA2NfKb3uaL1/input
          visualData: 1093.168807595699/1247.1372860729507/280/839/var(--node-color-4)/var(--node-color-4)
        '[kMj1iHlyn7uvhMPYrNACT]:text "Text"':
          data:
            text: >-
              {
                "body": "May 13, 2025\n\nNestlé is facing a significant crisis following confirmed reports of severe health issues linked to our 'Test Crisis' product. We are taking this matter seriously and cooperating fully with health authorities. A product recall is underway, and we are enhancing quality control measures immediately to protect consumers and restore trust."
              }
          outgoingConnections:
            - output->"Extract JSON" InKZuv1NtHKkVdTljUnyr/input
          visualData: 622.3540009452093/994.8668882401665/330/955//
        '[t4P06mqOI2sV7EerqbqEM]:subGraph "Subgraph"':
          data:
            graphId: 3soSwiUKQ_X4fGdokyxAH
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Text" xOWqjLn7Kn-tmgLDCZ5z8/input
          visualData: 1135.2755549054214/542.7531606894972/330/935/var(--node-color-1)/var(--node-color-1)
        '[vOaGFDHgORBL6mSQkyFYG]:text "Text"':
          data:
            body: ""
            text: >-
              May 13, 2025


              Nestlé is facing a significant crisis following confirmed reports of severe health issues linked to our 'Test Crisis' product. We have received alarming feedback from consumers who have experienced adverse reactions, and we understand the seriousness of this situation. As media coverage intensifies, we recognize the growing concern among our customers and the public.


              In response to these developments, we are taking immediate action. We are working closely with health authorities and regulatory bodies to investigate these reports thoroughly. Our top priority is the safety and well-being of our consumers, and we are committed to transparency throughout this process.


              We acknowledge the distress this has caused and are moving swiftly to implement a comprehensive recall of the affected products. Additionally, we are enhancing our communication efforts to keep all stakeholders informed as we navigate this challenging time.


              We understand that this situation has led to a decline in consumer trust and our brand reputation, and we take full responsibility for addressing these issues. We are dedicated to regaining your trust through our actions and commitment to quality and safety.


              We will continue to provide updates as more information becomes available. Thank you for your understanding and support as we work diligently to resolve this crisis.


              Barnaby Fry


              barnaby.fry@nestle.com

              7956949123
          outgoingConnections:
            - output->"Subgraph" t4P06mqOI2sV7EerqbqEM/input
          visualData: 681.599665429283/401/330/934//
        '[xOWqjLn7Kn-tmgLDCZ5z8]:text "Text"':
          data:
            text: "{{input}}"
          visualData: 1596.7757644961603/480.6549403395962/330/936//
    bYUcwJKSmTeEPW_gtQWo-:
      metadata:
        description: ""
        id: bYUcwJKSmTeEPW_gtQWo-
        name: "* Tone of voice subgraph "
      nodes:
        '[9s9QzSbL431SomeHHgofJ]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: 873/588/330/4/var(--node-color-3)/var(--node-color-3)
        '[aYPKatqidqry5KGMvmYiG]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Graph Output" 9s9QzSbL431SomeHHgofJ/value
          visualData: 307/480/330/2/var(--node-color-3)/var(--node-color-3)
    cGJILKi8TD1YSzAKUAzKV:
      metadata:
        description: The main press room pipeline flow
        id: cGJILKi8TD1YSzAKUAzKV
        name: MASTER
      nodes:
        '[-9u1wOd79FRibDuN_PXTo]:text "Text"':
          data:
            normalizeLineEndings: true
            text: |-
              {
                "data": [
                  {
                    "type": "holding_statement",
                    "story": "{{story}}",
                    "response": "{{response}}",
                    "document": "{{document}}"
                  }
                ]
              }
          outgoingConnections:
            - output->"SUB - Persona" crRYJXaigDtn5gFGsXhLO/input
          visualData: 7551.914969770921/-1713.4235310925676/330/1312//
        '[-TdYHZM2LJuz23yM_SbNx]:text "Text"':
          data:
            text: |-
              {
                "data": {
                  "original": "{{original}}",
                  "detail": "{{detail}}",
                  "history": {{history}},
                  "severity": "High",
                  "crisis": "{{documentId}}"
                }
              }
          outgoingConnections:
            - output->"HTTP - Create holding statement"
              EdSuIRskNWWxNKlLBgMQh/req_body
          visualData: 5692.102555564887/-2285.0955660182663/330/1071//
        '[0mouFF980bt242hGgYlXk]:setGlobal "Set Global"':
          data:
            dataType: string
            id: documentId
            useIdInput: false
          visualData: -681.6293251009471/1151.865887516662/230/1079//
        '[0qTTZyxV6eaYUo8yr0N4U]:code "Stringify history"':
          data:
            code: >-
              // This is a code node, you can write any JS here.

              // Inputs are accessible via an object `inputs`.

              // You want to stringify an array of objects (match_1.value).


              const rawArray = inputs.input1.value;  // This should be an array of objects already.


              const historyString = JSON.stringify(rawArray);


              return {
                output1: {
                  type: 'string',
                  value: historyString
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" KCt3dmUgSCv1CL6Nnco0u/history
          visualData: 4718.572968352804/-889.6348007020681/230/1063/var(--node-color-2)/var(--node-color-2)
        '[1d_I3CvsuxquLLL25ctDS]:destructure "Destructure"':
          data:
            body: ""
            paths:
              - $.data[0].tov
              - $.data[0].task
            text: ""
          outgoingConnections:
            - match_0->"TEXT - Define role" N9YOhpmU3aaCsH0rF8pKv/task
            - match_0->"Text" lTDwHyIvD8GtM-vUQWnZJ/Tone
            - match_1->"TEXT - Define role" N9YOhpmU3aaCsH0rF8pKv/tone
          visualData: -1578.0990790473056/-289.54356526642096/280/1097//
        '[1mRKcxaiTgLwLLKdmgtGm]:code "Esape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Set Global" CUV14RQmCdM2ueUbiTCjn/value
          visualData: 1307.5463351034061/134.84206297793511/230/1286/var(--node-color-2)/var(--node-color-2)
        '[2uPrdf3woHnGtAJDrw2Lz]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: -685.3452129042051/232.01456369971473/330/1332/var(--node-color-3)/var(--node-color-3)
        '[4PpdHSOarBvynuMBQSfp0]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Subgraph" gS957dQIpZe538bFQvRMd/input
          visualData: 3119.561038751958/-2253.4746919201866/330/1060//
        '[5Vt_w52al8pELwha4UnRD]:getGlobal "Get Global"':
          data:
            dataType: string
            id: story
            onDemand: true
            useIdInput: false
            wait: false
          outgoingConnections:
            - value->"Text" -9u1wOd79FRibDuN_PXTo/story
            - value->"Text" slwZi5WuxceneksXs_M6Y/story
            - value->"Text" tEzx1gfv3oT5tzEpObm53/story
          visualData: 6712.606186043038/-2640.7520992440213/230/1327//
        '[5tCwdNa9Fme3QWLBifr_T]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Extract JSON" vVX3Yn-222AziZr5PX_5i/input
          visualData: 6450.106162161549/-1671.3024778411764/330/1311//
        '[7eyt6KkrPUqx01ZWsuWGh]:destructure "Destructure"':
          data:
            body: ""
            headers: ""
            paths:
              - $.data.title
              - $.data.description
              - $.data.location
              - $.data.company.title
              - $.data.date
              - $.data.severity
              - $.data.brand
              - $.data.documentId
          outgoingConnections:
            - match_0->"Graph Output" 2uPrdf3woHnGtAJDrw2Lz/value
            - match_0->"Text" CocxXqVO7vwIgKSISUEL9/Crisis
            - match_1->"Text" CocxXqVO7vwIgKSISUEL9/Description
            - match_2->"Text" CocxXqVO7vwIgKSISUEL9/Location
            - match_3->"TEXT - Define role" N9YOhpmU3aaCsH0rF8pKv/Company
            - match_3->"Text" CocxXqVO7vwIgKSISUEL9/Company
            - match_4->"Text" CocxXqVO7vwIgKSISUEL9/Date
            - match_6->"Text" CocxXqVO7vwIgKSISUEL9/Product
            - match_7->"Holding statement system prompt"
              ZEJe86ipFxX2Pgn0SpYkX/documentId
            - match_7->"Set Global" 0mouFF980bt242hGgYlXk/value
            - match_7->"Text" lTDwHyIvD8GtM-vUQWnZJ/documentId
            - match_7->"Text" o747HrcX1XEo2Bl_seAFB/input
          visualData: -1112.456167558564/660.9274817907149/280/425//
        '[8CLGVNhjMOvxwx8MYaYi0]:subGraph "SUB - Persona"':
          data:
            graphId: o8S-CeePSytOJAterI2wq
            useAsGraphPartialOutput: false
            useErrorOutput: false
          visualData: 8078.386270435491/-1113.5665255547315/330/1330/var(--node-color-1)/var(--node-color-1)
        '[8jE-ZpLfAnzdBIVRdCP5R]:code "Esape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" KCt3dmUgSCv1CL6Nnco0u/original
          visualData: 5134.224700632292/-1224.230891837498/230/1078/var(--node-color-2)/var(--node-color-2)
        '[8kQ8t8qRadfNV1_Q0UKef]:code "Esape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" go-76mD_mFK_Pu79briiA/original
          visualData: 5110.966695523628/-1923.3834630157526/230/1076/var(--node-color-2)/var(--node-color-2)
        '[Ax5hkueX-YZVwVDb0c62a]:destructure "Destructure"':
          data:
            paths:
              - $.data.documentId
          outgoingConnections:
            - match_0->"Text" -9u1wOd79FRibDuN_PXTo/document
          visualData: 7180.508535265784/-1660.6889691170727/280/1311//
        '[BVMuY0r8TcD1bvaQNiT6F]:code "Stringify history"':
          data:
            code: >-
              // This is a code node, you can write any JS here.

              // Inputs are accessible via an object `inputs`.

              // You want to stringify an array of objects (match_1.value).


              const rawArray = inputs.input1.value;  // This should be an array of objects already.


              const historyString = JSON.stringify(rawArray);


              return {
                output1: {
                  type: 'string',
                  value: historyString
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" -TdYHZM2LJuz23yM_SbNx/history
          visualData: 4744.820852706041/-2141.7890111366323/230/1060/var(--node-color-2)/var(--node-color-2)
        '[BZZSdCliXLEnBwJ_JiFWi]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Extract JSON" rycG3u2QjX1s7Lt8ABerx/input
          visualData: 6497.780341621388/-1019.2427329711078/330/1314//
        '[CUV14RQmCdM2ueUbiTCjn]:setGlobal "Set Global"':
          data:
            dataType: string
            id: story
            useIdInput: false
          visualData: 1633.0747060473436/-76.07659122542043/230/1326//
        '[CocxXqVO7vwIgKSISUEL9]:text "Text"':
          data:
            text: >-
              There is an emerging crisis for {{Company}}. That crisis is
              {{Crisis}}, and the detailed description is {{Description}}.


              The crisis happened on {{Date}} at {{Location}}.


              It relates to the prodcut {{Product}}.
          outgoingConnections:
            - output->"Chat" DOH9j6ldq5b44D5MY0YHO/prompt
          visualData: -686.6013397768722/589.6374802938983/330/1014//
        '[DOH9j6ldq5b44D5MY0YHO]:chat "Chat"':
          data:
            additionalParameters: []
            body: ""
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 2048
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            text: >-
              There is an emerging crisis for {{Company}}. That crisis is
              {{Crisis}}.


              The crisis happened on {{Date}} at {{Location}}.


              It relates to the prodcut {{Product}}.


              You should geneate an expanded description of the crisis situation described in the prompt.


              At the top add the title <h1>Crisis Description</h1>\n.


              Output a JSON object in the following format:


              {

              "Crisis Description": [
                  {
                  "Description1": "<h1>Crisis Description</h1>\nText of crisis"
                  }
              ]

              }
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Extract JSON" H2LewNpd8KUIDKEIDZj-K/input
            - response->"Extract JSON" zxftMeqPv_Rfjt9lpoE6Q/input
            - response->"Subgraph" GGEwPqFn8e-aYjpv4Lp3Q/input
          visualData: 209.54528303704194/327.58531005263103/304.7865093297828/985//
        '[EdSuIRskNWWxNKlLBgMQh]:httpCall "HTTP - Create holding statement"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/holding-statements/
            useBodyInput: true
            useHeadersInput: false
          outgoingConnections:
            - json->"Text" fYmCn_cOJYBmJFERsTjL7/input
          visualData: 6091.347825018738/-2300.498822713318/280/1294/var(--node-color-4)/var(--node-color-4)
        '[FjQI4UdqOmvAKOKYuNChp]:destructure "Destructure"':
          data:
            paths:
              - $.detail
              - $.history
          outgoingConnections:
            - match_0->"Text" q-Jg-oegWFhpJfpNaq5YM/input
            - match_1->"Stringify history" 0qTTZyxV6eaYUo8yr0N4U/input1
          visualData: 3931.5582403898065/-1018.7228709543153/280/1063//
        '[Fw9yt9G5_folRZdEl4KpZ]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Subgraph" KV0JmRNqaqaPAiTAakT-Y/input
          visualData: 3099.1198189552306/-1631.3435858667438/330/1061//
        '[GE3dothNsb-QgfptTQIAJ]:subGraph "Subgraph"':
          data:
            graphId: oNDvNATb6Cp0mwhFoA39A
            useAsGraphPartialOutput: false
            useErrorOutput: false
          visualData: 1302.7403784901328/829.8013480553224/330/1322/var(--node-color-1)/var(--node-color-1)
        '[GGEwPqFn8e-aYjpv4Lp3Q]:subGraph "Subgraph"':
          data:
            graphId: KpT800xhGZdwy4QxONPKN
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Chat" IwTKZWYXuAna_v309uJ1p/prompt
            - output->"Chat" ar6v6LMNTaqxVthRlZG20/prompt
            - output->"Subgraph" GE3dothNsb-QgfptTQIAJ/input
          visualData: 831.2431469956049/665.5798116477145/330/1323/var(--node-color-1)/var(--node-color-1)
        '[H2LewNpd8KUIDKEIDZj-K]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" k-klyzvhniFfqH5hvjuOU/object
          visualData: 612.6715368493043/319.2460630139273/280/1273//
        '[HD1rxQpwP9XrZwNWaaoLF]:comment "Comment"':
          data:
            backgroundColor: rgba(0,0,0,0.05)
            color: rgba(255,255,255,1)
            height: 600
            text: Get comms team
          visualData: -407.119081962525/-603.5767147483365/830.1844441677374/462//
        '[HfflPV-SqxtJY7immzBiY]:destructure "Destructure"':
          data:
            paths:
              - $.detail
              - $.history
          outgoingConnections:
            - match_0->"Text" sVqhMd9Dv_z6t-iLCYdE0/input
            - match_1->"Stringify history" rZDXS2m5Sw_t7IdGh4W45/input1
          visualData: 3937.3649049463147/-1648.7459753354367/280/1061//
        '[HmDdB8p2wc8vu8FcBadjI]:destructure "Destructure"':
          data:
            paths:
              - $.data.documentId
          outgoingConnections:
            - match_0->"Text" tEzx1gfv3oT5tzEpObm53/document
          visualData: 7243.561482293314/-2166.650422094084/280/1307//
        '[IwTKZWYXuAna_v309uJ1p]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 1024
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Extract JSON" Xk1Tw7lxeDqacNIT1bMNu/input
          visualData: 1554.2430639057575/-612.7891319636341/230/1101//
        '[Iz7CjdEDhzVwzP3IMCiNB]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: PUT
            text: ""
            url: ""
            useBodyInput: true
            useHeadersInput: false
            useUrlInput: true
          visualData: 904.2939961958964/1158.2674583765736/280/997/var(--node-color-4)/var(--node-color-4)
        '[KCt3dmUgSCv1CL6Nnco0u]:text "Text"':
          data:
            text: |-
              {
                "data": {
                  "original": "{{original}}",
                  "detail": "{{detail}}",
                  "history": {{history}},
                  "severity": "Low",
                  "crisis": "{{documentId}}"
                }
              }
          outgoingConnections:
            - output->"HTTP - Create holding statement"
              k6JG9xcW7kayuT_sKxgg8/req_body
          visualData: 5686.684001810778/-1029.7291690177606/330/1281//
        '[KJ0n7LZTEzcnuQDvmpaz4]:destructure "Destructure"':
          data:
            paths:
              - $.data[0].role
              - $.data[0].name
              - $.data[0].email
              - $.data[0].phone
              - $.data[0].documentId
          outgoingConnections:
            - match_0->"Holding statement system prompt"
              ZEJe86ipFxX2Pgn0SpYkX/Position
            - match_1->"Holding statement system prompt"
              ZEJe86ipFxX2Pgn0SpYkX/Spokesman
            - match_1->"Text" lTDwHyIvD8GtM-vUQWnZJ/Spokesman
            - match_2->"Holding statement system prompt"
              ZEJe86ipFxX2Pgn0SpYkX/Email
            - match_2->"Text" lTDwHyIvD8GtM-vUQWnZJ/Email
            - match_3->"Holding statement system prompt"
              ZEJe86ipFxX2Pgn0SpYkX/Phone
            - match_3->"Text" lTDwHyIvD8GtM-vUQWnZJ/Phone
          visualData: 44.4321762346097/-397.50808679427195/280/742//
        '[KV0JmRNqaqaPAiTAakT-Y]:subGraph "Subgraph"':
          data:
            graphId: 3soSwiUKQ_X4fGdokyxAH
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Destructure" HfflPV-SqxtJY7immzBiY/object
          visualData: 3516.5189972081184/-1669.0014292376593/330/1061/var(--node-color-1)/var(--node-color-1)
        '[Kh8n8tY-O5thO4Vrbai26]:text "CRISIS ID FOR LEAD"':
          data:
            body: ""
            text: ye8w2fo87pymtxxfx0vyfzaa
          visualData: -2454.2293769751946/804.3248288959268/330/1319//
        '[Kvidt5PDaXXL-X3MNTQ1I]:subGraph "Subgraph"':
          data:
            graphId: 3soSwiUKQ_X4fGdokyxAH
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Destructure" FjQI4UdqOmvAKOKYuNChp/object
          visualData: 3510.7123326516107/-1038.978324856538/330/1063/var(--node-color-1)/var(--node-color-1)
        '[LBWEhgpN_DvovGAccwRCS]:httpCall "HTTP - Create holding statement"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/holding-statements/
            useBodyInput: true
            useHeadersInput: false
          outgoingConnections:
            - json->"Text" 5tCwdNa9Fme3QWLBifr_T/input
          visualData: 6063.8906990899195/-1678.3677166598752/280/1293/var(--node-color-4)/var(--node-color-4)
        '[N9YOhpmU3aaCsH0rF8pKv]:text "TEXT - Define role"':
          data:
            text: >-
              You are a crisis communications public relations (PR) professional
              working for {{Company}}.


              {{task}}


              IMPORTANT

              Your writing tone is {{tone}}.
          description: Role definition copy
          outgoingConnections:
            - output->"Holding statement system prompt"
              ZEJe86ipFxX2Pgn0SpYkX/role
            - output->"Set Global Role" q-7FV8Lss_M2GuC2trzea/value
            - output->"Text" lTDwHyIvD8GtM-vUQWnZJ/role
            - output->"Text" vGUWgOtAY-i7sxm-WJ7eb/role
          visualData: -917.035218889501/-207.26675385946504/330/1099/var(--node-color-3)/var(--node-color-3)
        '[NNAmUBvMRaT47tbDU5-WC]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" HmDdB8p2wc8vu8FcBadjI/object
          visualData: 6896.21028768628/-2176.299066388724/280/1307//
        '[OJzyrdkuWTUnJ2Z6kZ8id]:comment "Comment"':
          data:
            backgroundColor: rgba(0,0,0,0.05)
            color: rgba(255,255,255,1)
            height: 2301.661364622636
            text: Holding statement
          visualData: 1158.2735741915471/-2668.394934842209/5413.722468869248/1065//
        '[OzfcqLFo3Rn18m4eME4ys]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: GET
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/tone-of-voices
          outgoingConnections:
            - json->"Destructure" 1d_I3CvsuxquLLL25ctDS/object
          visualData: -1636.717456853748/-881.121903987407/280/883/var(--node-color-4)/var(--node-color-4)
        '[P1s1Jkq4pQh1VXrNEUFNe]:destructure "Destructure"':
          data:
            paths:
              - $.data.documentId
          outgoingConnections:
            - match_0->"Text" slwZi5WuxceneksXs_M6Y/document
          visualData: 7228.182714725624/-1008.629224247004/280/1314//
        '[PL7deJDgrL1vwG8Fs8-jA]:code "Esape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" -TdYHZM2LJuz23yM_SbNx/detail
            - output1->"Text" tEzx1gfv3oT5tzEpObm53/response
          visualData: 4747.240396669109/-2539.152574305091/230/1279/var(--node-color-2)/var(--node-color-2)
        '[QG0B00OmZYN6SmNbPqPFN]:subGraph "Subgraph"':
          data:
            graphId: 8fhBx64QGpVrIT6XqLMrt
            useAsGraphPartialOutput: false
            useErrorOutput: false
          visualData: 2870.890026627163/709.0768325459575/330/1031/var(--node-color-1)/var(--node-color-1)
        '[QoK6o3d1jwnrnqPevijYa]:code "Esape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" -TdYHZM2LJuz23yM_SbNx/original
          visualData: 5107.645921021185/-2518.7569662714754/230/1278/var(--node-color-2)/var(--node-color-2)
        '[SZ4yIii2XvaHMue86QDO6]:comment "Comment"':
          data:
            backgroundColor: rgba(0,0,0,0.05)
            color: rgba(255,255,255,1)
            height: 1043.8609724340745
            text: Create role
          visualData: -1755.1826378964747/-940.1360241898007/1308.654927271846/916//
        '[W888kIoF-SH_n2m0tV7Rc]:text "Text"':
          data:
            body: ""
            headers: ""
            text: https://devoted-cats-3d3ab24394.strapiapp.com/api/crises/{{input}}?populate=company
          outgoingConnections:
            - output->"HTTP - Get crises" cKjknBn_o8XEPm2EFP1C3/url
          visualData: -1984.1165728777935/551.7698981750353/330/861//
        '[Xk1Tw7lxeDqacNIT1bMNu]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" mcgQkCMsGk4tJBFjxhXTS/object
          visualData: 2017.605049893614/-732.2070674590149/280/658//
        '[Yh7uuKhGTKEJl40mOg0FE]:comment "Comment"':
          data:
            backgroundColor: rgba(255,0,0,0.05)
            color: rgba(212,212,212,1)
            height: 576.7027015866272
            text: |
              Expanded description
          visualData: -240.0097102675435/83.23420835040659/806.588848743939/888//
        '[ZEJe86ipFxX2Pgn0SpYkX]:text "Holding statement system prompt"':
          data:
            text: >-
              Your role is {{role}}


              ACTION FOR THIS TASK

              Your job to write a short form output that would go out to the media to inform press that a full response is being worked on.


              This note is sent to the media prior to a full press release.


              The total length should be 2 or 3 short paragraphs.


              You will be passed a JSON object of 3 items, a High, Medium and Low risk scenario. Create one output holding statement for each of the 3 cases.


              Each response should take the form of a short high level description of the issue and an explanation that a full response is being prepared.


              Start the response with the healine of one sentence that summarizes the holding statement content. Put the headline in all capitals. Ensure there is a double line break after this. 


              On the next line add today's date (in the format Tuesday 17th June 2025) followed by a line break. Do not prefix it with Date: or similar. Just have the date only.


              Use natural line breaks in the prose like \n.


              Each response should be signed off by the company PR spokesperson called {{Spokesman}} whose company role is {{Position}}. This should form part of the holding statement response.


              Ensure there is a double line break before this.


              Each response should include the contact details of {{Email}} and {{Phone}}.


              Ensure there is a double line break before this.


              Output only a JSON object in the following format:


              {

              "data": {
                  "high": "Holding statement 1 content",
                  "medium": "Holding statement 2 content",
                  "low": "Holding statement 3 content",
                  "documentId": {{documentId}}
                  }
              }
          outgoingConnections:
            - output->"Chat" IwTKZWYXuAna_v309uJ1p/systemPrompt
          visualData: 1006.1841699238838/-668.8593305481993/330/1317//
        '[_Ua5Iaa7bVa0WnfBltgtN]:code "Esape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" -9u1wOd79FRibDuN_PXTo/response
            - output1->"Text" go-76mD_mFK_Pu79briiA/detail
          visualData: 4719.128107348857/-1913.1859334898859/230/1280/var(--node-color-2)/var(--node-color-2)
        '[amanjT5aC-pMQbTIoqiAn]:text "Text"':
          data:
            text: aqvoxymesg5jovysyqa6lv0m
          visualData: -2461.5099108561403/1186.2792496346233/330/1320//
        '[ancy-mfuttJ79LFtk4zEf]:destructure "Destructure"':
          data:
            paths:
              - $.detail
              - $.history
          outgoingConnections:
            - match_0->"Text" zKdgkKa2zUZ5TKLX_tXgg/input
            - match_1->"Stringify history" BVMuY0r8TcD1bvaQNiT6F/input1
          visualData: 3957.806124743042/-2270.8770813888796/280/1060//
        '[ar6v6LMNTaqxVthRlZG20]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 4096
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Extract JSON" foghClfs0RpllTUuFHt-Q/input
          visualData: 2235.16007930099/627.4246883271637/230/1029//
        '[bqckyf2pK3-sULlIQFUw0]:comment "Comment"':
          data:
            backgroundColor: rgba(0,0,0,0.05)
            color: rgba(255,255,255,1)
            height: 597.2698296024814
            text: Call in the content from Strapi
          visualData: -1569.739174387927/456.69059632781625/804.7758411904256/1331//
        '[cKjknBn_o8XEPm2EFP1C3]:httpCall "HTTP - Get crises"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: GET
            text: ""
            url: ""
            useHeadersInput: false
            useUrlInput: true
          outgoingConnections:
            - json->"Destructure" 7eyt6KkrPUqx01ZWsuWGh/object
          visualData: -1480.2231785001838/559.3316352095475/280/1015/var(--node-color-4)/var(--node-color-4)
        '[crRYJXaigDtn5gFGsXhLO]:subGraph "SUB - Persona"':
          data:
            graphId: o8S-CeePSytOJAterI2wq
            useAsGraphPartialOutput: false
            useErrorOutput: false
          visualData: 8020.968283997122/-1763.696095985575/330/1329/var(--node-color-1)/var(--node-color-1)
        '[dZzpjkTcyMIFqR4NBAMrV]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Subgraph" Kvidt5PDaXXL-X3MNTQ1I/input
          visualData: 3093.3131543987224/-1001.3204814856224/330/1063//
        '[fYmCn_cOJYBmJFERsTjL7]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Extract JSON" NNAmUBvMRaT47tbDU5-WC/input
          visualData: 6513.159109189079/-2177.263930818188/330/1307//
        '[foghClfs0RpllTUuFHt-Q]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Subgraph" QG0B00OmZYN6SmNbPqPFN/input
          visualData: 2528.427633787131/708.1575062871152/280/1030//
        '[gEC9dXtwHK8R4y7GC-ffB]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Text" W888kIoF-SH_n2m0tV7Rc/input
          visualData: -2432.896571707314/581.1418776579796/330/1316/var(--node-color-3)/var(--node-color-3)
        '[gS957dQIpZe538bFQvRMd]:subGraph "Subgraph"':
          data:
            graphId: 3soSwiUKQ_X4fGdokyxAH
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - output->"Destructure" ancy-mfuttJ79LFtk4zEf/object
          visualData: 3536.960217004846/-2291.132535291102/330/1060/var(--node-color-1)/var(--node-color-1)
        '[go-76mD_mFK_Pu79briiA]:text "Text"':
          data:
            text: |-
              {
                "data": {
                  "original": "{{original}}",
                  "detail": "{{detail}}",
                  "history": {{history}},
                  "severity": "Medium",
                  "crisis": "{{documentId}}"
                }
              }
          outgoingConnections:
            - output->"HTTP - Create holding statement"
              LBWEhgpN_DvovGAccwRCS/req_body
          visualData: 5683.354512654977/-1674.6576368516412/330/1069//
        '[hMBnQG7H5-eoGm-4FGM03]:comment "Comment"':
          data:
            backgroundColor: rgba(0,0,0,0.05)
            color: rgba(255,255,255,1)
            height: 792.3856491817096
            text: Long form press release
          visualData: 1780.9199859891603/380.47046833164717/1498.4394066305986/1027//
        '[k-klyzvhniFfqH5hvjuOU]:destructure "Destructure"':
          data:
            paths:
              - $.data.description
          outgoingConnections:
            - match_0->"Esape chars" 1mRKcxaiTgLwLLKdmgtGm/input1
          visualData: 941.3382557878363/285.21824787883486/280/1271//
        '[k6JG9xcW7kayuT_sKxgg8]:httpCall "HTTP - Create holding statement"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/holding-statements/
            useBodyInput: true
            useHeadersInput: false
          outgoingConnections:
            - json->"Text" BZZSdCliXLEnBwJ_JiFWi/input
          visualData: 6067.438576042865/-1027.296893882482/280/1066/var(--node-color-4)/var(--node-color-4)
        '[lTDwHyIvD8GtM-vUQWnZJ]:text "Text"':
          data:
            text: >-
              Your role is {{role}}


              ACTION FOR THIS TASK

              It is your job to write longform output for a press release that would go out to the media to inform them of the crisis.


              You will be passed a JSON object of 3 items, a High risk scenario, a Medium risk scenario and a Low risk scenario. Create one output press release for each of the 3 cases.


              Each response should take the form of a description of the issue including details of the projected scenario and details of how the business intends to respond to that crisis.


              Start with today's date (in the format Tuesday 17th June 2025) followed by a line break. Do not prefix it with Date: or similar. Just have the date only.


              The full response should be a minimum of 5 paragraphs.


              Each response should be written in this {{Tone}}.


              Use natural line breaks in the prose like \n.


              Each response should be signed off by the company PR spokesperson called {{Spokesman}}. Ensure there is a line break before this.


              Each press release should include the contact details of {{Email}} and {{Phone}} at the bottom.


              Ensure there is a double line break before this. Ensure there is no excess spacing at the bottom the file.


              INSTRUCTIONS ON WHAT TO AVOID

              - Ensure all information provided is factually accurate and based on credible sources.

              - Avoid making speculative or unverified claims.

              - Respect privacy and confidentiality in all recommendations.


              Output a JSON object in this format:


              {
                  "high": "High risk scenario press release content",
                  "medium": "Medium risk scenario press release content",
                  "low": "Low risk scenario press release content",
                  "documentId": {{documentId}}
              }
          outgoingConnections:
            - output->"Chat" ar6v6LMNTaqxVthRlZG20/systemPrompt
          visualData: 1845.9949300183237/648.8933772892684/330/1104//
        '[mcgQkCMsGk4tJBFjxhXTS]:destructure "Destructure"':
          data:
            paths:
              - $.data.high
              - $.data.medium
              - $.data.low
              - $.data.documentId
            text: ""
          outgoingConnections:
            - match_0->"Esape chars" QoK6o3d1jwnrnqPevijYa/input1
            - match_0->"Text" 4PpdHSOarBvynuMBQSfp0/input
            - match_1->"Esape chars" 8kQ8t8qRadfNV1_Q0UKef/input1
            - match_1->"Text" Fw9yt9G5_folRZdEl4KpZ/input
            - match_2->"Esape chars" 8jE-ZpLfAnzdBIVRdCP5R/input1
            - match_2->"Text" dZzpjkTcyMIFqR4NBAMrV/input
            - match_3->"Text" -TdYHZM2LJuz23yM_SbNx/documentId
            - match_3->"Text" KCt3dmUgSCv1CL6Nnco0u/documentId
            - match_3->"Text" go-76mD_mFK_Pu79briiA/documentId
          visualData: 2406.8901435626326/-744.8168319243129/280/655//
        '[o747HrcX1XEo2Bl_seAFB]:text "Text"':
          data:
            text: https://devoted-cats-3d3ab24394.strapiapp.com/api/crises/{{input}}
          outgoingConnections:
            - output->"Http Call" Iz7CjdEDhzVwzP3IMCiNB/url
          visualData: 272.67668897985925/1119.0111222387814/330/1112//
        '[p5Qh0kyc_g5eWylv3780o]:comment "Comment"':
          data:
            backgroundColor: rgba(0,0,0,0.05)
            color: rgba(255,255,255,1)
            height: 661.2989123849472
            text: Define the severity
          visualData: 43.648670782855476/1017.0829941731288/1232.0641438214789/1011//
        '[q-7FV8Lss_M2GuC2trzea]:setGlobal "Set Global Role"':
          data:
            dataType: string
            id: role
            text: ""
            useIdInput: false
          visualData: -812.8646502629709/-797.4300311874822/230/1096//
        '[q-Jg-oegWFhpJfpNaq5YM]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Esape chars" qg7650rwZTB-qCMshVSbi/input1
          visualData: 4284.017411897066/-1023.985900660515/330/1063//
        '[qg7650rwZTB-qCMshVSbi]:code "Esape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" KCt3dmUgSCv1CL6Nnco0u/detail
            - output1->"Text" slwZi5WuxceneksXs_M6Y/response
          visualData: 4741.448697711939/-1335.5818041861803/230/1282/var(--node-color-2)/var(--node-color-2)
        '[qic03BQQlMsFH93Oh0O67]:subGraph "Subgraph"':
          data:
            graphId: GHgi_Qdv5HEfN9Cwup8cY
            useAsGraphPartialOutput: false
            useErrorOutput: false
          outgoingConnections:
            - severity->"Http Call" Iz7CjdEDhzVwzP3IMCiNB/req_body
          visualData: 486.9219445345881/1287.3263836178776/330/995/var(--node-color-1)/var(--node-color-1)
        '[rZDXS2m5Sw_t7IdGh4W45]:code "Stringify history"':
          data:
            code: >-
              // This is a code node, you can write any JS here.

              // Inputs are accessible via an object `inputs`.

              // You want to stringify an array of objects (match_1.value).


              const rawArray = inputs.input1.value;  // This should be an array of objects already.


              const historyString = JSON.stringify(rawArray);


              return {
                output1: {
                  type: 'string',
                  value: historyString
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" go-76mD_mFK_Pu79briiA/history
          visualData: 4724.379632909313/-1519.6579050831895/230/1061/var(--node-color-2)/var(--node-color-2)
        '[rwFAT6zA-ucJxZtYuGctM]:subGraph "SUB - Persona"':
          data:
            graphId: o8S-CeePSytOJAterI2wq
            useAsGraphPartialOutput: false
            useErrorOutput: false
          visualData: 8025.954460978112/-2085.9008780800286/330/1328/var(--node-color-1)/var(--node-color-1)
        '[rycG3u2QjX1s7Lt8ABerx]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" P1s1Jkq4pQh1VXrNEUFNe/object
          visualData: 6880.83152011859/-1018.2778685416438/280/1314//
        '[sVqhMd9Dv_z6t-iLCYdE0]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Esape chars" _Ua5Iaa7bVa0WnfBltgtN/input1
          visualData: 4289.824076453574/-1654.0090050416363/330/1061//
        '[slwZi5WuxceneksXs_M6Y]:text "Text"':
          data:
            normalizeLineEndings: true
            text: |-
              {
                "data": [
                  {
                    "type": "holding_statement",
                    "story": "{{story}}",
                    "response": "{{response}}",
                    "document": "{{document}}"
                  }
                ]
              }
          outgoingConnections:
            - output->"SUB - Persona" 8CLGVNhjMOvxwx8MYaYi0/input
          visualData: 7620.308261321361/-1128.5816450798495/330/1313//
        '[tEzx1gfv3oT5tzEpObm53]:text "Text"':
          data:
            normalizeLineEndings: true
            text: |-
              {
                "data": [
                  {
                    "type": "holding_statement",
                    "story": "{{story}}",
                    "response": "{{response}}",
                    "document": "{{document}}"
                  }
                ]
              }
          outgoingConnections:
            - output->"SUB - Persona" rwFAT6zA-ucJxZtYuGctM/input
          visualData: 7585.137755566229/-2220.1286539857097/330/1308//
        '[vGUWgOtAY-i7sxm-WJ7eb]:text "Text"':
          data:
            text: >-
              Your role is {{role}}


              ACTION FOR THIS TASK

              You should generate an expanded description of the crisis situation described in the prompt. The output should include natural line breaks.


              Do not confabulate or hallucinate. Do not add details that you are unsure of.


              Also generate a concise title description in fewer than 10 words.


              Do not adjust the severity at this stage, leave that as Unknown.


              Output only a JSON object in the following format:


              {

              "data": {
                  "severity": "Unknown",
                  "title": "Crisis title",
                  "date": "Crisis date",
                  "description": "Text of crisis"
                  }
              }


              Return only the final valid UTF-8 JSON object.
          outgoingConnections:
            - output->"Chat" DOH9j6ldq5b44D5MY0YHO/systemPrompt
          visualData: -199.33787655900795/156.50428744643352/330/991//
        '[vVX3Yn-222AziZr5PX_5i]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" Ax5hkueX-YZVwVDb0c62a/object
          visualData: 6833.15734065875/-1670.3376134117125/280/1311//
        '[xQfq8BV4M9MDHCKcpL6vJ]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: GET
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/comms-teams
          outgoingConnections:
            - json->"Destructure" KJ0n7LZTEzcnuQDvmpaz4/object
          visualData: -341.409286403287/-502.1614298576312/280/463/var(--node-color-4)/var(--node-color-4)
        '[zKdgkKa2zUZ5TKLX_tXgg]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Esape chars" PL7deJDgrL1vwG8Fs8-jA/input1
          visualData: 4310.265296250302/-2276.140111095079/330/1060//
        '[zxftMeqPv_Rfjt9lpoE6Q]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Subgraph" qic03BQQlMsFH93Oh0O67/input
          visualData: 105.86316061727027/1431.5091608870898/280/993//
    hcy2UDhZVh6QP8e0AjKC7:
      metadata:
        description: Check the content of a single release using the vector DB
        id: hcy2UDhZVh6QP8e0AjKC7
        name: "* PR - Check single release"
      nodes:
        '[0YE9EtaAR-geTE11xkRdf]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" 5pFfLjYXfRWct7bondsH8/object
          visualData: 1314.5083531195799/1026.5346867397284/280/977//
        '[5pFfLjYXfRWct7bondsH8]:destructure "Destructure"':
          data:
            paths:
              - $.suitability
          outgoingConnections:
            - match_0->"Bool" _emBmfGLJIvtAg0GxSdad/input
          visualData: 1654.7585228712765/1113.2306601890105/280/978//
        '[6JaC_oSAGFBhKIVMkEWYH]:graphOutput "Graph Output"':
          data:
            dataType: boolean
            id: Analysis
          visualData: 2309.542929930828/1195.9668038861435/330/980/var(--node-color-3)/var(--node-color-3)
        '[7lZQ6SdsilaRpAUbvczRw]:httpCall "Http Call"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer xktxuiBbfwJ1t8X74yVzzlPhRvEkwcIHJY7Ly8lIKbcgRv359yShXd8rOTczQtZE"
              }
            method: POST
            url: https://pinecone-rewrite.vercel.app/api/evaluate
            useBodyInput: true
          outgoingConnections:
            - res_body->"Text" b1aRe3TdJP-9VTorMrr4-/input
          visualData: 576.5288311205318/810.6861390462234/280/975/var(--node-color-4)/var(--node-color-4)
        '[MzLNx8qSegilkaBQOcD40]:graphInput "Graph Input"':
          data:
            dataType: object
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Http Call" 7lZQ6SdsilaRpAUbvczRw/req_body
          visualData: 158.73080265533633/909.7163465652109/330/957/var(--node-color-3)/var(--node-color-3)
        '[_emBmfGLJIvtAg0GxSdad]:boolean "Bool"':
          data:
            useValueInput: true
            value: false
          outgoingConnections:
            - value->"Graph Output" 6JaC_oSAGFBhKIVMkEWYH/value
          visualData: 2028.9025712507832/1143.9540293327823/160/979//
        '[b1aRe3TdJP-9VTorMrr4-]:text "Text"':
          data:
            text: "{{input}}"
          outgoingConnections:
            - output->"Extract JSON" 0YE9EtaAR-geTE11xkRdf/input
          visualData: 917.6873774869994/975.5829089409737/330/976//
    jOpSxxKf2JqdCjND_3e_G:
      metadata:
        description: ""
        id: jOpSxxKf2JqdCjND_3e_G
        name: Severity - Boycott intent
      nodes:
        '[1pt1AoLaGy2XMo3A3rdx2]:text "Text"':
          data:
            normalizeLineEndings: true
            text: >-
              Your role is {{role}}


              ACTION FOR THIS TASK


              You will be given some text describing a corporate crisis scenario that presents a risk to the company.


              Your task is to estimate the likelihood of a boycott or similar withdrawal of support for each key stakeholder group:
              	•	Customers - e.g., refusal to buy products, brand boycotts, public campaigns
              	•	Employees - e.g., resignations, internal protest, union action
              	•	Investors - e.g., divestment, shareholder activism, public criticism

              You must return a score from 1 to 10, where 10 indicates a very high risk of boycott (or equivalent action) for that group.


              Use the following scale as a guide:


              1. Very Low - No real risk of disengagement or protest.

              2. Low - Discontent may be voiced, but no action expected.

              3. Moderate - Some dissatisfaction; possible isolated actions.

              4. Noticeable - Small group may organize or speak out.

              5. Concerning - Growing appetite for action, pressure starting to build.

              6. Serious - Petitions, warnings, or soft disengagement begin.

              7. High - Visible calls for action; some stakeholders disengaging.

              8. Critical - Active movements form; mainstream traction gained.

              9. Severe - Widespread boycott/disengagement in progress.

              10. Extreme - Sustained, large-scale action with measurable damage to support or loyalty.


              For each item add some short text to describe the rationale for why you gave the rating. Use language that makes it clear that the rationale is predictive rather than describing actual outcomes so the reader does not misunderstand the rationale as being actual events.


              Output as a JSON object ONLY in this format:


              {
                "severity_boycottrisk": {
                  "customers": {
                    "score": 9,
                    "rationale": "Customers have initiated a trending boycott campaign after revelations of unethical sourcing, with widespread traction on social media and activist involvement."
                  },
                  "employees": {
                    "score": 4,
                    "rationale": "Some internal frustration is evident, but organized action has not materialized beyond internal Slack discussions and a few HR complaints."
                  },
                  "investors": {
                    "score": 6,
                    "rationale": "Ethical investment groups are questioning continued support and have begun pressuring the board for accountability and governance changes."
                  }
                }
              }
          outgoingConnections:
            - output->"Chat" XJCuxUWihIzR-cbjR6krZ/systemPrompt
          visualData: 416.72421911436925/-14.619811780539578/1483.8939389042782/22/var(--node-color-2)/var(--node-color-2)
        '[FMN3myud8AeDshAxs3gFl]:getGlobal "Get Global"':
          data:
            dataType: string
            id: role
            onDemand: true
            useIdInput: false
            wait: false
          outgoingConnections:
            - value->"Text" 1pt1AoLaGy2XMo3A3rdx2/role
          visualData: 30.05573084417361/94.22019567972885/230/25//
        '[KQRuERJDGLd1l16j4ab5w]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: 2511.610012743351/518.1260740704022/330/20/var(--node-color-3)/var(--node-color-3)
        '[LHBPa2dRTTy5gniOy23ZA]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Chat" XJCuxUWihIzR-cbjR6krZ/prompt
          visualData: 1486.9561718983412/856.114351892229/330/20/var(--node-color-3)/var(--node-color-3)
        '[XJCuxUWihIzR-cbjR6krZ]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 1024
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Graph Output" KQRuERJDGLd1l16j4ab5w/value
          visualData: 2019.815380508604/359.47484734212014/230/21//
    l_qOMNG_p0UM3yOSO2O29:
      metadata:
        description: ""
        id: l_qOMNG_p0UM3yOSO2O29
        name: "* Type fix subgraph"
      nodes:
        '[9FhlORNwZYcIVHtLJaxqi]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" QEn1E8xVZzB_bS764rMrr/object
          visualData: 721.71079670396/386.68672057136405/280/802//
        '[QEn1E8xVZzB_bS764rMrr]:destructure "Destructure"':
          data:
            paths:
              - $.data.history[0].rewrite
          outgoingConnections:
            - match_0->"Graph Output" wLpk1ymSPlqIjm7PlEhL7/value
          visualData: 1054.7203843220875/389.500445937691/280/803//
        '[dTuFNljWI8EZD_ylncCwr]:text "Text"':
          data:
            text: "{{input}}"
          outgoingConnections:
            - output->"Extract JSON" 9FhlORNwZYcIVHtLJaxqi/input
          visualData: 328.59824376627853/374.78808718390417/330/801//
        '[wLpk1ymSPlqIjm7PlEhL7]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: 1383.8314940199007/382.7851479137843/330/804/var(--node-color-3)/var(--node-color-3)
        '[ziNEvMm2gbmrP5s8p2qTy]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Text" dTuFNljWI8EZD_ylncCwr/input
          visualData: -66.36410962894178/314.03516910390215/330/796/var(--node-color-3)/var(--node-color-3)
    o8S-CeePSytOJAterI2wq:
      metadata:
        description: ""
        id: o8S-CeePSytOJAterI2wq
        name: Persona responses
      nodes:
        '[0toQ7otCbGYV4BJhfroQs]:text "MAGGI"':
          data:
            normalizeLineEndings: true
            text: >-
              {
                "data": [
                  {
                    "type": "holding_statement",
                    "story": "An investigative report by a prominent Indian media outlet reveals that many of Nestlé India's best-selling products for children — Maggi noodles — are high in sugar, salt, and fat, with little nutritional benefit. The report is based on internal product formulation documents and interviews with former employees who allege that nutrition goals often took a back seat to taste and profit.  A senior pediatrician quoted in the story says Nestlé is hooking a generation onto junk through comfort branding The controversy intensifies when parenting groups and nutritionists begin questioning the company's Good Food, Good Life positioning.  Trigger Points: - The story hits just before exam season, when kids consume more packaged snacks - Critics tie the findings to India's rising childhood obesity and diabetes rates  Media/Social Sentiment: - Trending hashtags: #NestleTargetsKids #NotSoHealthy - Viral posts from parenting influencers and doctors calling for a boycott - News debates on Should Nestlé products be in your child's lunchbox?",
                    "response": "Nestlé India acknowledges the concerns raised following a recent investigative report and is committed to addressing them with transparency and responsibility. We recognize the importance of maintaining trust with our consumers, health experts, and advocacy groups, and are taking decisive steps to address the situation.  The report has led to significant discussions on social media, and we are aware of the impact this has had on our brand perception. We are actively engaging with major retailers to address their concerns and are committed to restoring confidence in our products. We are also aware of the potential legal scrutiny regarding our advertising practices and are taking this matter seriously.  In response, we are implementing the following actions: - Engaging in open dialogue with consumers and stakeholders to reaffirm our commitment to children's health and nutrition. - Conducting a comprehensive review of our advertising practices to ensure compliance with all relevant regulations. - Launching a transparent communication strategy to keep stakeholders informed of our progress and efforts to address these issues.  We deeply value the trust our consumers place in us and are dedicated to restoring that trust through accountability and meaningful action. We appreciate the feedback we have received and are committed to making changes that prioritize the health and safety of our consumers.  Thank you for your understanding and support during this challenging time.",
                    "document": "ts3z9a9gay2snfofebrboiut"
                  }
                ]
              }
          visualData: -1033.8584068304417/-191.47249062980853/330/1285//
        '[5EiLKmo7w9b4gFBgcGYGH]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 2048
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            text: ""
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Text" 5Y3FictwbAFC76GeVupmD/input
          visualData: 793/445/230/41//
        '[5MXvKU7VrRMcqa06Uu95g]:httpCall "HTTP - Get personas"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: GET
            url: ""
            useUrlInput: true
          outgoingConnections:
            - res_body->"Extract JSON" W7K_wlTZmm7h6113_lBR7/input
          visualData: -7.218032393627169/803.9523394537637/280/1272/var(--node-color-4)/var(--node-color-4)
        '[5Y3FictwbAFC76GeVupmD]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"HTTP - Insert opinion" LRsfzaFpuaSwSyF2M7Q6n/req_body
          visualData: 1200.7263268269237/324.26280353681756/330/1202//
        '[DXAvqxOfU-d_soA_drX3j]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" xhBkRsJdMKOgM6bdi3J-f/object
          visualData: -461.7836334947949/-185.0370252561404/280/1294//
        '[LRsfzaFpuaSwSyF2M7Q6n]:httpCall "HTTP - Insert opinion"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://crisis-comms.vercel.app/api/opinion-bulk
            useBodyInput: true
            useHeadersInput: false
          visualData: 1756.1196234837712/393.6715225915185/280/1201/var(--node-color-4)/var(--node-color-4)
        '[P4uxruW9s0rJ87fOjh3l0]:text "THIS IS CRISIS ID FOR MAGGI"':
          data:
            normalizeLineEndings: true
            text: dky8i30kisowxhuupwo8iz5l
          visualData: -933.608338506341/1276.9779979265468/330/1292//
        '[W7K_wlTZmm7h6113_lBR7]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Chat" 5EiLKmo7w9b4gFBgcGYGH/prompt
          visualData: 368.5079362608488/741.2908821468498/280/1302//
        '[WTM0eQ7RF2bj0EWgU0cfW]:getGlobal "Get Global"':
          data:
            dataType: string
            id: documentId
            onDemand: true
            useIdInput: false
            wait: false
          outgoingConnections:
            - value->"Text" lzjxmw4IEOlvyLbivSIQm/crisis
          visualData: -866.4417990017953/964.498251253507/230/1288//
        '[ior0x9Ow0Q_LH4R2-jRL8]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Extract JSON" DXAvqxOfU-d_soA_drX3j/input
          visualData: -670.4869792959269/378.67293846268433/330/1306/var(--node-color-3)/var(--node-color-3)
        '[kaqyS8z6lnhb9qI8EonOo]:text "Text"':
          data:
            normalizeLineEndings: true
            text: >-
              {
                "data": [
                  {
                    "type": "press_release",
                    "story": "An investigative report by a prominent Indian media outlet reveals that many of Nestlé India's best-selling products for children — Maggi noodles — are high in sugar, salt, and fat, with little nutritional benefit. The report is based on internal product formulation documents and interviews with former employees who allege that nutrition goals often took a back seat to taste and profit.  A senior pediatrician quoted in the story says Nestlé is hooking a generation onto junk through comfort branding The controversy intensifies when parenting groups and nutritionists begin questioning the company's Good Food, Good Life positioning.  Trigger Points: - The story hits just before exam season, when kids consume more packaged snacks - Critics tie the findings to India's rising childhood obesity and diabetes rates  Media/Social Sentiment: - Trending hashtags: #NestleTargetsKids #NotSoHealthy - Viral posts from parenting influencers and doctors calling for a boycott - News debates on Should Nestlé products be in your child's lunchbox?",
                    "response": "Nestlé India acknowledges the concerns raised following a recent investigative report and is committed to addressing them with transparency and responsibility. We recognize the importance of maintaining trust with our consumers, health experts, and advocacy groups, and are taking decisive steps to address the situation.  The report has led to significant discussions on social media, and we are aware of the impact this has had on our brand perception. We are actively engaging with major retailers to address their concerns and are committed to restoring confidence in our products. We are also aware of the potential legal scrutiny regarding our advertising practices and are taking this matter seriously.  In response, we are implementing the following actions: - Engaging in open dialogue with consumers and stakeholders to reaffirm our commitment to children's health and nutrition. - Conducting a comprehensive review of our advertising practices to ensure compliance with all relevant regulations. - Launching a transparent communication strategy to keep stakeholders informed of our progress and efforts to address these issues.  We deeply value the trust our consumers place in us and are dedicated to restoring that trust through accountability and meaningful action. We appreciate the feedback we have received and are committed to making changes that prioritize the health and safety of our consumers.  Thank you for your understanding and support during this challenging time.",
                    "document": "owwmou3udwx4u0yjrv0t67xs"
                  }
                ]
              }
          visualData: -1047.8457636122853/219.6281139183359/330/1286//
        '[lzjxmw4IEOlvyLbivSIQm]:text "Text"':
          data:
            body: ""
            normalizeLineEndings: true
            text: https://devoted-cats-3d3ab24394.strapiapp.com/api/personas?filters%5Bcrises%5D%5BdocumentId%5D%5B$contains%5D={{crisis}}
          outgoingConnections:
            - output->"HTTP - Get personas" 5MXvKU7VrRMcqa06Uu95g/url
          visualData: -425/906/330/1275//
        '[xDt2dHDGaMAshg_hApWi9]:text "Persona system prompt"':
          data:
            normalizeLineEndings: true
            text: >-
              You have been given a JSON item in the following format:


              {
                "data": [
                  {
                    "id": 3,
                    "documentId": "bhrp283cg1523zr5h6m09xra",
                    "personality": "Customer",
                    "profile": "Details of the profile.",
                    "concerns": "Concerns of the profile."
                  },
                  {
                    "id": 1,
                    "documentId": "ukzezst3nmp9tshcb8nsbtbs",
                    "personality": "Employee",
                    "profile": "Details of the profile.",
                    "concerns": "Concerns of the profile."
                  }
                  ...
                ]
              }


              ---


              ### TASK INSTRUCTIONS


              Iterate over **every item** in the `data` array. For **each and every item**, generate a complete response using this exact structure:


              **Stakeholder Brief (for each item):**

              - Use the value of `"personality"` as the **Role**

              - Use the value of `"profile"` as the **Perspective**

              - Use the value of `"concerns"` as the **Concerns**


              These are specific to each item and must be used individually per stakeholder.


              Also use the two **global inputs** for every item:

              - **Crisis Event:** `{{story}}` — a brief summary of the incident

              - **Company Response:** `{{response}}` — the full corporate statement or press release


              ---


              ### RESPONSE FORMAT (PER STAKEHOLDER):


              For each item, write a stakeholder reaction in **three short, natural-sounding paragraphs** from the stakeholder's point of view. Then, continue with:


              - A double line break  

              - A single sentence stating clearly whether the stakeholder feels **reassured** or **not reassured** by the company's response (do **not** include any numeric score here).

              - Then add four bullet points using **exactly** this structure:
                ✅ First positive point  
                ✅ Second positive point  
                ❎ First negative point  
                ❎ Second negative point

              Finally, assign a numeric **satisfaction rating from 0 to 10**, and include it in the output JSON under `satisfaction`.


              ---


              ### JSON OUTPUT FORMAT (REQUIRED)


              You must return a **single valid JSON object** like this:


              json

              {
                "data": [
                  {
                    "title": "Temporary loop title",
                    "view": "Full stakeholder reaction text here...",
                    "persona": 3,
                    "satisfaction": 0,
                    "{{type}}": "{{document}}"
                  },
                  ...
                ]
              }



              FINAL OUTPUT SANITISATION RULES (MUST FOLLOW):


              - All field values in the JSON output must be clean strings.

              - Do NOT include any unescaped control characters such as:
                • raw line breaks (newline characters)
                • tab characters
                • carriage returns
              - Use natural paragraph formatting using standard spaces and punctuation only.

              - All newline breaks must be safely embedded within strings (if needed) and never inserted as raw line breaks in the JSON structure.

              - Output must be valid JSON that can be parsed without error using standard JSON.parse().

              - Do not include any markdown or fencing characters such as ```
          outgoingConnections:
            - output->"Chat" 5EiLKmo7w9b4gFBgcGYGH/systemPrompt
          visualData: 375.23462695344534/63.95338013655169/330/1304/var(--node-color-2)/var(--node-color-2)
        '[xhBkRsJdMKOgM6bdi3J-f]:destructure "Destructure"':
          data:
            paths:
              - $.data[0].type
              - $.data[0].story
              - $.data[0].response
              - $.data[0].document
            text: ""
          outgoingConnections:
            - match_0->"Persona system prompt" xDt2dHDGaMAshg_hApWi9/type
            - match_1->"Persona system prompt" xDt2dHDGaMAshg_hApWi9/story
            - match_2->"Persona system prompt" xDt2dHDGaMAshg_hApWi9/response
            - match_3->"Persona system prompt" xDt2dHDGaMAshg_hApWi9/document
          visualData: -32.465683243127685/-208.68080281553833/280/1295//
    oNDvNATb6Cp0mwhFoA39A:
      metadata:
        description: ""
        id: oNDvNATb6Cp0mwhFoA39A
        name: Scenarios - Submit
      nodes:
        '[1CrILRhQbgDe3WTIPQa5o]:text "Text"':
          data:
            text: |
              {
                "data": {
                  "title": "{{title}}",
                  "detail": "{{input}}",
                  "severity": "High",
                  "crisis": "{{documentId}}"
                }
              }
          outgoingConnections:
            - output->"HTTP - Submit scenario" vGrMCp_P9c7YdmxhhVt0j/req_body
          visualData: 1139.0392673838164/-44.572934944116184/330/1022//
        '[1qj6Co0QHa5bSTYQVEa3n]:text "Text"':
          data:
            text: |
              {
                "data": {
                  "title": "{{title}}",
                  "detail": "{{input}}",
                  "severity": "Low",
                  "crisis": "{{documentId}}"
                }
              }
          outgoingConnections:
            - output->"HTTP - Submit scenario" N-4ftkm3HlWZXOFajTkuX/req_body
          visualData: 1178.2307278133226/884.0831626672435/330/1026//
        '[6MfIA8qVDWK88vrdAM8uu]:httpCall "HTTP - Submit scenario"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://crisis-comms.vercel.app/api/submit-scenario
            useBodyInput: true
            useHeadersInput: false
          visualData: 1689.704650741663/465.31229678879856/280/1023/var(--node-color-4)/var(--node-color-4)
        '[AG3KlNFLjYWCmgFLLBti5]:destructure "Destructure"':
          data:
            paths:
              - $.high
              - $.medium
              - $.low
              - $.high-title
              - $.medium-title
              - $.low-title
          outgoingConnections:
            - match_0->"Escape chars" NfF1QuChlgvE0W3a1yjsv/input1
            - match_1->"Escape chars" GDqFcz_Y8Y9alSR8jBnaU/input1
            - match_2->"Escape chars" CyJZJea-eMnyXOOf7mVY0/input1
            - match_3->"Text" 1CrILRhQbgDe3WTIPQa5o/title
            - match_4->"Text" OtrcUUB5vFEU7ON7mpZBk/title
            - match_5->"Text" 1qj6Co0QHa5bSTYQVEa3n/title
          visualData: 290.4877952850993/136.88424718587225/280/998//
        '[CyJZJea-eMnyXOOf7mVY0]:code "Escape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" 1qj6Co0QHa5bSTYQVEa3n/input
          visualData: 788.8296094686916/888.550399746584/230/1029/var(--node-color-2)/var(--node-color-2)
        '[GDqFcz_Y8Y9alSR8jBnaU]:code "Escape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" OtrcUUB5vFEU7ON7mpZBk/input
          visualData: 767.7142478172325/392.9353366261563/230/1028/var(--node-color-2)/var(--node-color-2)
        '[LFQ7hV1m94UbW-qNJmK-c]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          visualData: 323.81540695367414/963.0715829007078/330/1005//
        '[N-4ftkm3HlWZXOFajTkuX]:httpCall "HTTP - Submit scenario"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://crisis-comms.vercel.app/api/submit-scenario
            useBodyInput: true
            useHeadersInput: false
          visualData: 1711.6872026970589/904.4755084465291/280/1025/var(--node-color-4)/var(--node-color-4)
        '[NfF1QuChlgvE0W3a1yjsv]:code "Escape chars"':
          data:
            code: >-
              const inputText = inputs.input1.value;


              const escapedText = inputText
                .replace(/\r?\n/g, '\\n')   // Replace real line breaks with literal "\n"
                .replace(/\s+/g, ' ')       // Replace multiple spaces/tabs/newlines with single space
                .replace(/"/g, '\\"')       // Escape double quotes
                .trim();                    // Trim leading/trailing whitespace

              return {
                output1: {
                  type: 'string',
                  value: escapedText
                }
              };
            inputNames: input1
            outputNames: output1
          outgoingConnections:
            - output1->"Text" 1CrILRhQbgDe3WTIPQa5o/input
          visualData: 721.2604521840224/-211.0719163050949/230/1027/var(--node-color-2)/var(--node-color-2)
        '[ODTD1f3YIQB7Jjx5qfflt]:getGlobal "Get Global"':
          data:
            dataType: string
            id: documentId
            onDemand: true
            useIdInput: false
            wait: false
          outgoingConnections:
            - value->"Text" 1CrILRhQbgDe3WTIPQa5o/documentId
            - value->"Text" 1qj6Co0QHa5bSTYQVEa3n/documentId
            - value->"Text" LFQ7hV1m94UbW-qNJmK-c/input
            - value->"Text" OtrcUUB5vFEU7ON7mpZBk/documentId
          visualData: -20.88920141676641/818.3483016632435/230/1030//
        '[OtrcUUB5vFEU7ON7mpZBk]:text "Text"':
          data:
            text: |
              {
                "data": {
                  "title": "{{title}}",
                  "detail": "{{input}}",
                  "severity": "Medium",
                  "crisis": "{{documentId}}"
                }
              }
          outgoingConnections:
            - output->"HTTP - Submit scenario" 6MfIA8qVDWK88vrdAM8uu/req_body
          visualData: 1153.1161751514558/418.5653977949644/330/1024//
        '[Z00m77150kI2e-9hLYAHl]:graphInput "Graph Input"':
          data:
            dataType: object
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Destructure" AG3KlNFLjYWCmgFLLBti5/object
          visualData: -256.7169630176482/156.98115236792142/425.72297281994804/1010/var(--node-color-3)/var(--node-color-3)
        '[vGrMCp_P9c7YdmxhhVt0j]:httpCall "HTTP - Submit scenario"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            text: ""
            url: https://crisis-comms.vercel.app/api/submit-scenario
            useBodyInput: true
            useHeadersInput: false
          visualData: 1698.4545425384927/46.947482389836765/280/1011/var(--node-color-4)/var(--node-color-4)
    woA8EqvL5ygBotd8wOw92:
      metadata:
        description: ""
        id: woA8EqvL5ygBotd8wOw92
        name: "* Retrun test"
      nodes:
        '[4ZZqgBDSsJdr9zflfKcAs]:text "Text"':
          data:
            text: >-
              {
                "data": {
                  "original": "Date: June 6, 2025\n\nWe acknowledge the operational delays resulting from the incident at our Nestlé bottling factory. While we are implementing effective communication and contingency plans to support our employees and maintain product supply, we are also conducting a thorough investigation. A comprehensive response will be issued shortly to provide clarity and address any concerns.\n\nLisa McCooey\nComms Director\n\nlisa.mccooey@nestle.com\n7956876432\n\n",
                  "detail": "Date: June 6, 2025\n\nWe acknowledge the operational delays resulting from the incident at our Nestlé bottling factory. Our priority is to ensure the safety and well-being of our employees and customers. We are actively implementing effective communication and contingency plans to support our employees and maintain product supply. Concurrently, we are conducting a thorough investigation to understand the root cause of the incident. We are committed to transparency and will provide a comprehensive response shortly to address any concerns and outline our next steps.\n\nLisa McCooey\nComms Director\n\nlisa.mccooey@nestle.com\n7956876432",
                  "history": [{"change":"Added emphasis on safety and well-being of employees and customers.","source":"Statement on contamination/safety of drinking water","rationale":"Emphasizing safety and well-being aligns with best practices in crisis communication, ensuring stakeholders that their health and safety are prioritized."},{"change":"Included commitment to transparency and a comprehensive response.","source":"Statement on death of two children from contaminated Buitoni Fraîch’Up pizza","rationale":"Commitment to transparency and providing a comprehensive response is crucial in maintaining trust and demonstrating accountability."},{"change":"Clarified the purpose of the investigation to understand the root cause.","source":"Statement on death of two children from contaminated Buitoni Fraîch’Up pizza","rationale":"Clarifying the purpose of the investigation helps stakeholders understand the company's proactive approach to resolving the issue."}],
                  "severity": "Medium",
                  "crisis": "sihaot4huf96o6ikq7fq0pl8"
                }
              }
          outgoingConnections:
            - output->"HTTP - Create holding statement"
              LYnyrol2qbVUWF8ydxoas/req_body
          visualData: 442/638.4032566950518/330/1071//
        '[AZlSwDR0pBaPEOLdO2IS0]:extractJson "Extract JSON"':
          outgoingConnections:
            - output->"Destructure" IG1pNfpgQHaQrQN43Z93v/object
          visualData: 1630.0940133344184/810.6154503850117/280/1305//
        '[IG1pNfpgQHaQrQN43Z93v]:destructure "Destructure"':
          data:
            paths:
              - $.data.documentId
          visualData: 1977.4452079414525/820.2640946796515/280/1306//
        '[LYnyrol2qbVUWF8ydxoas]:httpCall "HTTP - Create holding statement"':
          data:
            body: ""
            errorOnNon200: true
            headers: >-
              {
                "Content-Type": "application/json",
                "Authorization": "Bearer 2c8cbceae2a59257bc63e614929f26a71fa400bb174bf92506cb50149746d46d8455af51fd3c46f51ba9384058c62ab24ba3228b3ccb24d2faa1ef3a869c750020b77b3cae9f10ee68280ac7049b8d92f902f5adff8e48a93d89202900be018c0a978360b805e2ea7b7d0d8d686d2d7a26784677e55d4e78b186579af6b8cddf"
              }
            method: POST
            url: https://devoted-cats-3d3ab24394.strapiapp.com/api/holding-statements/
            useBodyInput: true
            useHeadersInput: false
          outgoingConnections:
            - json->"Text" eYslTmJfi6TVVSJbrOGHs/input
          visualData: 841.2452694538515/623/280/1294/var(--node-color-4)/var(--node-color-4)
        '[eYslTmJfi6TVVSJbrOGHs]:text "Text"':
          data:
            normalizeLineEndings: true
            text: "{{input}}"
          outgoingConnections:
            - output->"Extract JSON" AZlSwDR0pBaPEOLdO2IS0/input
          visualData: 1247.042834837217/809.6505859555477/330/1303//
    zYlQ2Xk75J--kr6X__Awr:
      metadata:
        description: Write and individual set of QA pairs
        id: zYlQ2Xk75J--kr6X__Awr
        name: PR- Q&A agent subgraph
      nodes:
        '[-IjNUGgP_EOUbfrIroaZD]:text "QA system prompt"':
          data:
            jsonTemplate: ""
            text: >-
              Your role is {{role}}


              ACTION FOR THIS TASK


              You will be sent a press release and you should create a set of 10 questions and answer pairs. These questions and answers are the kind of queries that the press or public might ask as result of hearing about the details of the press release.


              Output the question and answer pairs as text in this string format (don't convert to JSON):

                  "qa": [
                    {
                      "question1": "Question 1",
                      "answer1": "Answer 1"
                    },
                    {
                      "question2": "Question 2",
                      "answer2": "Answer 2"
                    }
                  ]
          description: Holding statement system prompt
          outgoingConnections:
            - output->"Chat" OIvEjExXAsyhFYZZ_ZKZy/systemPrompt
          visualData: 690.1790071001392/158.81781408422745/330/204/var(--node-color-4)/var(--node-color-4)
        '[9gX-XwuOZ8FJIB5Zkoxo8]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: 1579.023440510591/645.96675371681/330/207/var(--node-color-3)/var(--node-color-3)
        '[KbMK7Q1Ob8Zjbg1LJrWrR]:getGlobal "Get Global"':
          data:
            dataType: string
            id: role
            onDemand: true
            useIdInput: false
            wait: false
          outgoingConnections:
            - value->"QA system prompt" -IjNUGgP_EOUbfrIroaZD/role
          visualData: 318.80618502765265/321.90884957146795/230/206//
        '[OIvEjExXAsyhFYZZ_ZKZy]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            headers: []
            maxTokens: 4096
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          description: Generate Q&A Pairs
          outgoingConnections:
            - response->"Graph Output" 9gX-XwuOZ8FJIB5Zkoxo8/value
          visualData: 1145.2857516735453/558.6550098918765/230/180//
        '[vOvnA4hJyoMgKjkbFacnz]:graphInput "Graph Input"':
          data:
            dataType: string
            id: input
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Chat" OIvEjExXAsyhFYZZ_ZKZy/prompt
          visualData: 628.2555846757787/685.4363535235127/330/186/var(--node-color-3)/var(--node-color-3)
  metadata:
    description: Main press office flow
    id: rsPSGIUBe90RiHneohxrL
    title: Crisis Comms Graph
  plugins:
    - id: openai
      name: OpenAI
      type: built-in
    - id: pinecone
      name: Pinecone
      type: built-in
    - id: anthropic
      name: Anthropic
      type: built-in
  references: []
